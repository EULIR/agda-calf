<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Examples.Amortized</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--prop</a> <a id="20" class="Pragma">--rewriting</a> <a id="32" class="Pragma">--guardedness</a> <a id="46" class="Symbol">#-}</a>

<a id="51" class="Keyword">module</a> <a id="58" href="Examples.Amortized.html" class="Module">Examples.Amortized</a> <a id="77" class="Keyword">where</a>

<a id="84" class="Keyword">open</a> <a id="89" class="Keyword">import</a> <a id="96" href="Calf.CostMonoid.html" class="Module">Calf.CostMonoid</a>
<a id="112" class="Keyword">open</a> <a id="117" class="Keyword">import</a> <a id="124" href="Calf.CostMonoids.html" class="Module">Calf.CostMonoids</a> <a id="141" class="Keyword">using</a> <a id="147" class="Symbol">(</a><a id="148" href="Calf.CostMonoids.html#209" class="Function">ℕ-CostMonoid</a><a id="160" class="Symbol">)</a>

<a id="costMonoid"></a><a id="163" href="Examples.Amortized.html#163" class="Function">costMonoid</a> <a id="174" class="Symbol">=</a> <a id="176" href="Calf.CostMonoids.html#209" class="Function">ℕ-CostMonoid</a>
<a id="189" class="Keyword">open</a> <a id="194" href="Calf.CostMonoid.html#3610" class="Module">CostMonoid</a> <a id="205" href="Examples.Amortized.html#163" class="Function">costMonoid</a> <a id="216" class="Keyword">using</a> <a id="222" class="Symbol">(</a><a id="223" href="Calf.CostMonoid.html#3662" class="Field">ℂ</a><a id="224" class="Symbol">)</a>

<a id="227" class="Keyword">open</a> <a id="232" class="Keyword">import</a> <a id="239" href="Level.html" class="Module">Level</a> <a id="245" class="Keyword">using</a> <a id="251" class="Symbol">(</a><a id="252" href="Level.html#512" class="Function">0ℓ</a><a id="254" class="Symbol">)</a>

<a id="257" class="Keyword">open</a> <a id="262" class="Keyword">import</a> <a id="269" href="Calf.html" class="Module">Calf</a> <a id="274" href="Examples.Amortized.html#163" class="Function">costMonoid</a>
<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="Calf.Types.Unit.html" class="Module">Calf.Types.Unit</a>
<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Calf.Types.Product.html" class="Module">Calf.Types.Product</a>
<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Calf.Types.Bool.html" class="Module">Calf.Types.Bool</a>
<a id="372" class="Keyword">open</a> <a id="377" class="Keyword">import</a> <a id="384" href="Calf.Types.Maybe.html" class="Module">Calf.Types.Maybe</a>
<a id="401" class="Keyword">open</a> <a id="406" class="Keyword">import</a> <a id="413" href="Calf.Types.Nat.html" class="Module">Calf.Types.Nat</a>
<a id="428" class="Keyword">open</a> <a id="433" class="Keyword">import</a> <a id="440" href="Calf.Types.List.html" class="Module">Calf.Types.List</a>
<a id="456" class="Keyword">open</a> <a id="461" class="Keyword">import</a> <a id="468" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="477" class="Symbol">as</a> <a id="480" class="Module">Nat</a> <a id="484" class="Keyword">using</a> <a id="490" class="Symbol">(</a><a id="491" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a><a id="494" class="Symbol">;</a> <a id="496" href="Data.Nat.Base.html#2874" class="Primitive Operator">_∸_</a><a id="499" class="Symbol">;</a> <a id="501" href="Data.Nat.Base.html#2880" class="Function">pred</a><a id="505" class="Symbol">;</a> <a id="507" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a><a id="510" class="Symbol">;</a> <a id="512" href="Data.Nat.Base.html#3471" class="Function Operator">_^_</a><a id="515" class="Symbol">;</a> <a id="517" href="Data.Nat.Base.html#1709" class="Function Operator">_&gt;_</a><a id="520" class="Symbol">)</a>
<a id="522" class="Keyword">open</a> <a id="527" class="Keyword">import</a> <a id="534" href="Data.Product.html" class="Module">Data.Product</a>
<a id="547" class="Keyword">import</a> <a id="554" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="574" class="Symbol">as</a> <a id="577" class="Module">Nat</a>
<a id="581" class="Keyword">open</a> <a id="586" class="Keyword">import</a> <a id="593" href="Data.Nat.PredExp2.html" class="Module">Data.Nat.PredExp2</a>
<a id="611" class="Keyword">import</a> <a id="618" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="639" class="Symbol">as</a> <a id="642" class="Module">List</a>

<a id="648" class="Keyword">open</a> <a id="653" class="Keyword">import</a> <a id="660" href="Function.html" class="Module">Function</a> <a id="669" class="Keyword">hiding</a> <a id="676" class="Symbol">(</a><a id="677" href="Function.Bundles.html#8509" class="Function Operator">_⇔_</a><a id="680" class="Symbol">)</a>

<a id="683" class="Keyword">open</a> <a id="688" class="Keyword">import</a> <a id="695" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>
<a id="712" class="Keyword">open</a> <a id="717" class="Keyword">import</a> <a id="724" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="762" class="Symbol">as</a> <a id="765" class="Module">Eq</a> <a id="768" class="Keyword">using</a> <a id="774" class="Symbol">(</a><a id="775" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="778" class="Symbol">;</a> <a id="780" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="784" class="Symbol">;</a> <a id="786" class="Keyword">module</a> <a id="793" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a><a id="804" class="Symbol">)</a>

<a id="807" class="Keyword">variable</a>
  <a id="818" href="Examples.Amortized.html#818" class="Generalizable">A</a> <a id="820" href="Examples.Amortized.html#820" class="Generalizable">B</a> <a id="822" href="Examples.Amortized.html#822" class="Generalizable">C</a> <a id="824" class="Symbol">:</a> <a id="826" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="829" href="Calf.Metalanguage.html#267" class="Function">pos</a>
  <a id="835" href="Examples.Amortized.html#835" class="Generalizable">X</a> <a id="837" href="Examples.Amortized.html#837" class="Generalizable">Y</a> <a id="839" href="Examples.Amortized.html#839" class="Generalizable">Z</a> <a id="841" class="Symbol">:</a> <a id="843" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="846" href="Calf.Metalanguage.html#280" class="Function">neg</a>

<a id="_⋉_"></a><a id="851" href="Examples.Amortized.html#851" class="Function Operator">_⋉_</a> <a id="855" class="Symbol">:</a> <a id="857" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="860" href="Calf.Metalanguage.html#267" class="Function">pos</a> <a id="864" class="Symbol">→</a> <a id="866" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="869" href="Calf.Metalanguage.html#280" class="Function">neg</a> <a id="873" class="Symbol">→</a> <a id="875" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="878" href="Calf.Metalanguage.html#280" class="Function">neg</a>
<a id="882" href="Examples.Amortized.html#882" class="Bound">A</a> <a id="884" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="886" href="Examples.Amortized.html#886" class="Bound">X</a> <a id="888" class="Symbol">=</a> <a id="890" href="Calf.Metalanguage.html#2029" class="Function">Σ+-</a> <a id="894" href="Examples.Amortized.html#882" class="Bound">A</a> <a id="896" class="Symbol">(</a><a id="897" href="Function.Base.html#636" class="Function">const</a> <a id="903" href="Examples.Amortized.html#886" class="Bound">X</a><a id="904" class="Symbol">)</a>


<a id="908" class="Keyword">module</a> <a id="Simple"></a><a id="915" href="Examples.Amortized.html#915" class="Module">Simple</a> <a id="922" class="Keyword">where</a>
  <a id="930" class="Keyword">postulate</a>
    <a id="Simple.simple"></a><a id="944" href="Examples.Amortized.html#944" class="Postulate">simple</a> <a id="951" class="Symbol">:</a> <a id="953" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="956" href="Calf.Metalanguage.html#280" class="Function">neg</a>
  <a id="962" class="Keyword">record</a> <a id="Simple.Simple"></a><a id="969" href="Examples.Amortized.html#969" class="Record">Simple</a> <a id="976" class="Symbol">:</a> <a id="978" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="982" class="Keyword">where</a>
    <a id="992" class="Keyword">coinductive</a>
    <a id="1008" class="Keyword">field</a>
      <a id="Simple.Simple.here"></a><a id="1020" href="Examples.Amortized.html#1020" class="Field">here</a> <a id="1025" class="Symbol">:</a> <a id="1027" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="1031" class="Symbol">(</a><a id="1032" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="1034" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="1038" class="Symbol">)</a>
      <a id="Simple.Simple.next"></a><a id="1046" href="Examples.Amortized.html#1046" class="Field">next</a> <a id="1051" class="Symbol">:</a> <a id="1053" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="1057" href="Examples.Amortized.html#944" class="Postulate">simple</a>
  <a id="1066" class="Keyword">postulate</a>
    <a id="Simple.simple/decode"></a><a id="1080" href="Examples.Amortized.html#1080" class="Postulate">simple/decode</a> <a id="1094" class="Symbol">:</a> <a id="1096" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="1100" class="Symbol">(</a><a id="1101" href="Calf.Metalanguage.html#352" class="Function">U</a> <a id="1103" href="Examples.Amortized.html#944" class="Postulate">simple</a><a id="1109" class="Symbol">)</a> <a id="1111" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1113" href="Examples.Amortized.html#969" class="Record">Simple</a>
    <a id="1124" class="Symbol">{-#</a> <a id="1128" class="Keyword">REWRITE</a> <a id="1136" href="Examples.Amortized.html#1080" class="Postulate">simple/decode</a> <a id="1150" class="Symbol">#-}</a>

    <a id="Simple.here/step"></a><a id="1159" href="Examples.Amortized.html#1159" class="Postulate">here/step</a> <a id="1169" class="Symbol">:</a> <a id="1171" class="Symbol">∀</a> <a id="1173" class="Symbol">{</a><a id="1174" href="Examples.Amortized.html#1174" class="Bound">c</a> <a id="1176" href="Examples.Amortized.html#1176" class="Bound">e</a><a id="1177" class="Symbol">}</a> <a id="1179" class="Symbol">→</a> <a id="1181" href="Examples.Amortized.html#1020" class="Field">Simple.here</a> <a id="1193" class="Symbol">(</a><a id="1194" href="Calf.Step.html#385" class="Function">step</a> <a id="1199" href="Examples.Amortized.html#944" class="Postulate">simple</a> <a id="1206" href="Examples.Amortized.html#1174" class="Bound">c</a> <a id="1208" href="Examples.Amortized.html#1176" class="Bound">e</a><a id="1209" class="Symbol">)</a> <a id="1211" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1213" href="Calf.Step.html#385" class="Function">step</a> <a id="1218" class="Symbol">(</a><a id="1219" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="1221" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="1225" class="Symbol">)</a> <a id="1227" href="Examples.Amortized.html#1174" class="Bound">c</a> <a id="1229" class="Symbol">(</a><a id="1230" href="Examples.Amortized.html#1020" class="Field">Simple.here</a> <a id="1242" href="Examples.Amortized.html#1176" class="Bound">e</a><a id="1243" class="Symbol">)</a>
    <a id="Simple.next/step"></a><a id="1249" href="Examples.Amortized.html#1249" class="Postulate">next/step</a> <a id="1259" class="Symbol">:</a> <a id="1261" class="Symbol">∀</a> <a id="1263" class="Symbol">{</a><a id="1264" href="Examples.Amortized.html#1264" class="Bound">c</a> <a id="1266" href="Examples.Amortized.html#1266" class="Bound">e</a><a id="1267" class="Symbol">}</a> <a id="1269" class="Symbol">→</a> <a id="1271" href="Examples.Amortized.html#1046" class="Field">Simple.next</a> <a id="1283" class="Symbol">(</a><a id="1284" href="Calf.Step.html#385" class="Function">step</a> <a id="1289" href="Examples.Amortized.html#944" class="Postulate">simple</a> <a id="1296" href="Examples.Amortized.html#1264" class="Bound">c</a> <a id="1298" href="Examples.Amortized.html#1266" class="Bound">e</a><a id="1299" class="Symbol">)</a> <a id="1301" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1303" href="Calf.Step.html#385" class="Function">step</a> <a id="1308" href="Examples.Amortized.html#944" class="Postulate">simple</a>   <a id="1317" href="Examples.Amortized.html#1264" class="Bound">c</a> <a id="1319" class="Symbol">(</a><a id="1320" href="Examples.Amortized.html#1046" class="Field">Simple.next</a> <a id="1332" href="Examples.Amortized.html#1266" class="Bound">e</a><a id="1333" class="Symbol">)</a>
    <a id="1339" class="Symbol">{-#</a> <a id="1343" class="Keyword">REWRITE</a> <a id="1351" href="Examples.Amortized.html#1159" class="Postulate">here/step</a> <a id="1361" href="Examples.Amortized.html#1249" class="Postulate">next/step</a> <a id="1371" class="Symbol">#-}</a>

  <a id="1378" class="Symbol">{-#</a> <a id="1382" class="Keyword">TERMINATING</a> <a id="1394" class="Symbol">#-}</a>
  <a id="Simple.every"></a><a id="1400" href="Examples.Amortized.html#1400" class="Function">every</a> <a id="1406" class="Symbol">:</a> <a id="1408" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="1412" href="Examples.Amortized.html#944" class="Postulate">simple</a>
  <a id="1421" href="Examples.Amortized.html#1020" class="Field">Simple.here</a> <a id="1433" href="Examples.Amortized.html#1400" class="Function">every</a> <a id="1439" class="Symbol">=</a> <a id="1441" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="1445" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a>
  <a id="1452" href="Examples.Amortized.html#1046" class="Field">Simple.next</a> <a id="1464" href="Examples.Amortized.html#1400" class="Function">every</a> <a id="1470" class="Symbol">=</a> <a id="1472" href="Calf.Step.html#385" class="Function">step</a> <a id="1477" href="Examples.Amortized.html#944" class="Postulate">simple</a> <a id="1484" class="Number">1</a> <a id="1486" href="Examples.Amortized.html#1400" class="Function">every</a>

  <a id="Simple.Φ"></a><a id="1495" href="Examples.Amortized.html#1495" class="Function">Φ</a> <a id="1497" class="Symbol">:</a> <a id="1499" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="1503" href="Calf.Types.Bool.html#206" class="Function">bool</a> <a id="1508" class="Symbol">→</a> <a id="1510" href="Calf.CostMonoid.html#3662" class="Function">ℂ</a>
  <a id="1514" href="Examples.Amortized.html#1495" class="Function">Φ</a> <a id="1516" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a> <a id="1522" class="Symbol">=</a> <a id="1524" class="Number">1</a>
  <a id="1528" href="Examples.Amortized.html#1495" class="Function">Φ</a> <a id="1530" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>  <a id="1536" class="Symbol">=</a> <a id="1538" class="Number">0</a>

  <a id="1543" class="Symbol">{-#</a> <a id="1547" class="Keyword">TERMINATING</a> <a id="1559" class="Symbol">#-}</a>
  <a id="Simple.alternating"></a><a id="1565" href="Examples.Amortized.html#1565" class="Function">alternating</a> <a id="1577" class="Symbol">:</a> <a id="1579" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="1583" class="Symbol">(</a><a id="1584" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="1586" href="Calf.Types.Bool.html#206" class="Function">bool</a> <a id="1591" class="Symbol">λ</a> <a id="1593" href="Examples.Amortized.html#1593" class="Symbol">_</a> <a id="1595" class="Symbol">→</a> <a id="1597" href="Examples.Amortized.html#944" class="Postulate">simple</a><a id="1603" class="Symbol">)</a>
  <a id="1607" href="Examples.Amortized.html#1020" class="Field">Simple.here</a> <a id="1619" class="Symbol">(</a><a id="1620" href="Examples.Amortized.html#1565" class="Function">alternating</a> <a id="1632" href="Examples.Amortized.html#1632" class="Bound">b</a><a id="1633" class="Symbol">)</a> <a id="1635" class="Symbol">=</a> <a id="1637" href="Calf.Step.html#385" class="Function">step</a> <a id="1642" class="Symbol">(</a><a id="1643" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="1645" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="1649" class="Symbol">)</a> <a id="1651" class="Symbol">(</a><a id="1652" href="Examples.Amortized.html#1495" class="Function">Φ</a> <a id="1654" href="Examples.Amortized.html#1632" class="Bound">b</a><a id="1655" class="Symbol">)</a> <a id="1657" class="Symbol">(</a><a id="1658" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="1662" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a><a id="1666" class="Symbol">)</a>
  <a id="1670" href="Examples.Amortized.html#1046" class="Field">Simple.next</a> <a id="1682" class="Symbol">(</a><a id="1683" href="Examples.Amortized.html#1565" class="Function">alternating</a> <a id="1695" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1700" class="Symbol">)</a> <a id="1702" class="Symbol">=</a> <a id="1704" href="Calf.Step.html#385" class="Function">step</a> <a id="1709" href="Examples.Amortized.html#944" class="Postulate">simple</a> <a id="1716" class="Number">2</a> <a id="1718" class="Symbol">(</a><a id="1719" href="Examples.Amortized.html#1565" class="Function">alternating</a> <a id="1731" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1735" class="Symbol">)</a>
  <a id="1739" href="Examples.Amortized.html#1046" class="Field">Simple.next</a> <a id="1751" class="Symbol">(</a><a id="1752" href="Examples.Amortized.html#1565" class="Function">alternating</a> <a id="1764" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1769" class="Symbol">)</a> <a id="1771" class="Symbol">=</a> <a id="1773" href="Examples.Amortized.html#1565" class="Function">alternating</a> <a id="1785" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>

  <a id="1794" class="Keyword">record</a> <a id="Simple._≈_"></a><a id="1801" href="Examples.Amortized.html#1801" class="Record Operator">_≈_</a> <a id="1805" class="Symbol">(</a><a id="1806" href="Examples.Amortized.html#1806" class="Bound">s₁</a> <a id="1809" href="Examples.Amortized.html#1809" class="Bound">s₂</a> <a id="1812" class="Symbol">:</a> <a id="1814" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="1818" href="Examples.Amortized.html#944" class="Postulate">simple</a><a id="1824" class="Symbol">)</a> <a id="1826" class="Symbol">:</a> <a id="1828" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1832" class="Keyword">where</a>
    <a id="1842" class="Keyword">coinductive</a>
    <a id="1858" class="Keyword">field</a>
      <a id="Simple._≈_.here"></a><a id="1870" href="Examples.Amortized.html#1870" class="Field">here</a> <a id="1875" class="Symbol">:</a> <a id="1877" href="Examples.Amortized.html#1020" class="Field">Simple.here</a> <a id="1889" href="Examples.Amortized.html#1806" class="Bound">s₁</a> <a id="1892" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1894" href="Examples.Amortized.html#1020" class="Field">Simple.here</a> <a id="1906" href="Examples.Amortized.html#1809" class="Bound">s₂</a>
      <a id="Simple._≈_.next"></a><a id="1915" href="Examples.Amortized.html#1915" class="Field">next</a> <a id="1920" class="Symbol">:</a> <a id="1922" href="Examples.Amortized.html#1046" class="Field">Simple.next</a> <a id="1934" href="Examples.Amortized.html#1806" class="Bound">s₁</a> <a id="1937" href="Examples.Amortized.html#1801" class="Record Operator">≈</a> <a id="1939" href="Examples.Amortized.html#1046" class="Field">Simple.next</a> <a id="1951" href="Examples.Amortized.html#1809" class="Bound">s₂</a>

  <a id="Simple.≈-cong"></a><a id="1957" href="Examples.Amortized.html#1957" class="Function">≈-cong</a> <a id="1964" class="Symbol">:</a> <a id="1966" class="Symbol">(</a><a id="1967" href="Examples.Amortized.html#1967" class="Bound">c</a> <a id="1969" class="Symbol">:</a> <a id="1971" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="1975" href="Calf.Step.html#344" class="Function">cost</a><a id="1979" class="Symbol">)</a> <a id="1981" class="Symbol">{</a><a id="1982" href="Examples.Amortized.html#1982" class="Bound">x</a> <a id="1984" href="Examples.Amortized.html#1984" class="Bound">y</a> <a id="1986" class="Symbol">:</a> <a id="1988" href="Examples.Amortized.html#969" class="Record">Simple</a><a id="1994" class="Symbol">}</a> <a id="1996" class="Symbol">→</a> <a id="1998" href="Examples.Amortized.html#1982" class="Bound">x</a> <a id="2000" href="Examples.Amortized.html#1801" class="Record Operator">≈</a> <a id="2002" href="Examples.Amortized.html#1984" class="Bound">y</a> <a id="2004" class="Symbol">→</a> <a id="2006" href="Calf.Step.html#385" class="Function">step</a> <a id="2011" href="Examples.Amortized.html#944" class="Postulate">simple</a> <a id="2018" href="Examples.Amortized.html#1967" class="Bound">c</a> <a id="2020" href="Examples.Amortized.html#1982" class="Bound">x</a> <a id="2022" href="Examples.Amortized.html#1801" class="Record Operator">≈</a> <a id="2024" href="Calf.Step.html#385" class="Function">step</a> <a id="2029" href="Examples.Amortized.html#944" class="Postulate">simple</a> <a id="2036" href="Examples.Amortized.html#1967" class="Bound">c</a> <a id="2038" href="Examples.Amortized.html#1984" class="Bound">y</a>
  <a id="2042" href="Examples.Amortized.html#1870" class="Field">_≈_.here</a> <a id="2051" class="Symbol">(</a><a id="2052" href="Examples.Amortized.html#1957" class="Function">≈-cong</a> <a id="2059" href="Examples.Amortized.html#2059" class="Bound">c</a> <a id="2061" href="Examples.Amortized.html#2061" class="Bound">h</a><a id="2062" class="Symbol">)</a> <a id="2064" class="Symbol">=</a> <a id="2066" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="2074" class="Symbol">(</a><a id="2075" href="Calf.Step.html#385" class="Function">step</a> <a id="2080" class="Symbol">(</a><a id="2081" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="2083" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="2087" class="Symbol">)</a> <a id="2089" href="Examples.Amortized.html#2059" class="Bound">c</a><a id="2090" class="Symbol">)</a> <a id="2092" class="Symbol">(</a><a id="2093" href="Examples.Amortized.html#1870" class="Field">_≈_.here</a> <a id="2102" href="Examples.Amortized.html#2061" class="Bound">h</a><a id="2103" class="Symbol">)</a>
  <a id="2107" href="Examples.Amortized.html#1915" class="Field">_≈_.next</a> <a id="2116" class="Symbol">(</a><a id="2117" href="Examples.Amortized.html#1957" class="Function">≈-cong</a> <a id="2124" href="Examples.Amortized.html#2124" class="Bound">c</a> <a id="2126" href="Examples.Amortized.html#2126" class="Bound">h</a><a id="2127" class="Symbol">)</a> <a id="2129" class="Symbol">=</a> <a id="2131" href="Examples.Amortized.html#1957" class="Function">≈-cong</a> <a id="2138" href="Examples.Amortized.html#2124" class="Bound">c</a> <a id="2140" class="Symbol">(</a><a id="2141" href="Examples.Amortized.html#1915" class="Field">_≈_.next</a> <a id="2150" href="Examples.Amortized.html#2126" class="Bound">h</a><a id="2151" class="Symbol">)</a>

  <a id="2156" class="Symbol">{-#</a> <a id="2160" class="Keyword">TERMINATING</a> <a id="2172" class="Symbol">#-}</a>
  <a id="Simple.every≈alternating"></a><a id="2178" href="Examples.Amortized.html#2178" class="Function">every≈alternating</a> <a id="2196" class="Symbol">:</a> <a id="2198" class="Symbol">∀</a> <a id="2200" href="Examples.Amortized.html#2200" class="Bound">b</a> <a id="2202" class="Symbol">→</a> <a id="2204" href="Examples.Amortized.html#1565" class="Function">alternating</a> <a id="2216" href="Examples.Amortized.html#2200" class="Bound">b</a> <a id="2218" href="Examples.Amortized.html#1801" class="Record Operator">≈</a> <a id="2220" href="Calf.Step.html#385" class="Function">step</a> <a id="2225" href="Examples.Amortized.html#944" class="Postulate">simple</a> <a id="2232" class="Symbol">(</a><a id="2233" href="Examples.Amortized.html#1495" class="Function">Φ</a> <a id="2235" href="Examples.Amortized.html#2200" class="Bound">b</a><a id="2236" class="Symbol">)</a> <a id="2238" href="Examples.Amortized.html#1400" class="Function">every</a>
  <a id="2246" href="Examples.Amortized.html#1870" class="Field">_≈_.here</a> <a id="2255" class="Symbol">(</a><a id="2256" href="Examples.Amortized.html#2178" class="Function">every≈alternating</a> <a id="2274" class="Symbol">_)</a> <a id="2277" class="Symbol">=</a> <a id="2279" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="2286" href="Examples.Amortized.html#1915" class="Field">_≈_.next</a> <a id="2295" class="Symbol">(</a><a id="2296" href="Examples.Amortized.html#2178" class="Function">every≈alternating</a> <a id="2314" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="2319" class="Symbol">)</a> <a id="2321" class="Symbol">=</a> <a id="2323" href="Examples.Amortized.html#1957" class="Function">≈-cong</a> <a id="2330" class="Number">2</a> <a id="2332" class="Symbol">(</a><a id="2333" href="Examples.Amortized.html#2178" class="Function">every≈alternating</a> <a id="2351" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="2355" class="Symbol">)</a>
  <a id="2359" href="Examples.Amortized.html#1915" class="Field">_≈_.next</a> <a id="2368" class="Symbol">(</a><a id="2369" href="Examples.Amortized.html#2178" class="Function">every≈alternating</a> <a id="2387" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="2392" class="Symbol">)</a> <a id="2394" class="Symbol">=</a> <a id="2396" href="Examples.Amortized.html#2178" class="Function">every≈alternating</a> <a id="2414" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>


<a id="2422" class="Keyword">module</a> <a id="Queue"></a><a id="2429" href="Examples.Amortized.html#2429" class="Module">Queue</a> <a id="2435" class="Keyword">where</a>
  <a id="2443" class="Comment">-- moving `E` to a parameter on `module Queue` breaks things - Agda bug?</a>
  <a id="Queue.E"></a><a id="2518" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="2520" class="Symbol">:</a> <a id="2522" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="2525" href="Calf.Metalanguage.html#267" class="Function">pos</a>
  <a id="2531" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="2533" class="Symbol">=</a> <a id="2535" href="Calf.Types.Nat.html#183" class="Function">nat</a>

  <a id="2542" class="Keyword">postulate</a>
    <a id="Queue.queue"></a><a id="2556" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="2562" class="Symbol">:</a> <a id="2564" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="2567" href="Calf.Metalanguage.html#280" class="Function">neg</a> <a id="2571" class="Symbol">→</a> <a id="2573" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="2576" href="Calf.Metalanguage.html#280" class="Function">neg</a>
  <a id="2582" class="Keyword">record</a> <a id="Queue.Queue"></a><a id="2589" href="Examples.Amortized.html#2589" class="Record">Queue</a> <a id="2595" class="Symbol">(</a><a id="2596" href="Examples.Amortized.html#2596" class="Bound">X</a> <a id="2598" class="Symbol">:</a> <a id="2600" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="2603" href="Calf.Metalanguage.html#280" class="Function">neg</a><a id="2606" class="Symbol">)</a> <a id="2608" class="Symbol">:</a> <a id="2610" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2614" class="Keyword">where</a>
    <a id="2624" class="Keyword">coinductive</a>
    <a id="2640" class="Keyword">field</a>
      <a id="Queue.Queue.quit"></a><a id="2652" href="Examples.Amortized.html#2652" class="Field">quit</a>    <a id="2660" class="Symbol">:</a> <a id="2662" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="2666" href="Examples.Amortized.html#2596" class="Bound">X</a>
      <a id="Queue.Queue.enqueue"></a><a id="2674" href="Examples.Amortized.html#2674" class="Field">enqueue</a> <a id="2682" class="Symbol">:</a> <a id="2684" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="2688" class="Symbol">(</a><a id="2689" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="2691" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="2693" class="Symbol">λ</a> <a id="2695" href="Examples.Amortized.html#2695" class="Bound">_</a> <a id="2697" class="Symbol">→</a> <a id="2699" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="2705" href="Examples.Amortized.html#2596" class="Bound">X</a><a id="2706" class="Symbol">)</a>
      <a id="Queue.Queue.dequeue"></a><a id="2714" href="Examples.Amortized.html#2714" class="Field">dequeue</a> <a id="2722" class="Symbol">:</a> <a id="2724" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="2728" class="Symbol">(</a><a id="2729" href="Calf.Types.Maybe.html#196" class="Function">maybe</a> <a id="2735" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="2737" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="2739" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="2745" href="Examples.Amortized.html#2596" class="Bound">X</a><a id="2746" class="Symbol">)</a>
  <a id="2750" class="Keyword">postulate</a>
    <a id="Queue.queue/decode"></a><a id="2764" href="Examples.Amortized.html#2764" class="Postulate">queue/decode</a> <a id="2777" class="Symbol">:</a> <a id="2779" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="2783" class="Symbol">(</a><a id="2784" href="Calf.Metalanguage.html#352" class="Function">U</a> <a id="2786" class="Symbol">(</a><a id="2787" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="2793" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="2794" class="Symbol">))</a> <a id="2797" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2799" href="Examples.Amortized.html#2589" class="Record">Queue</a> <a id="2805" href="Examples.Amortized.html#835" class="Generalizable">X</a>
    <a id="2811" class="Symbol">{-#</a> <a id="2815" class="Keyword">REWRITE</a> <a id="2823" href="Examples.Amortized.html#2764" class="Postulate">queue/decode</a> <a id="2836" class="Symbol">#-}</a>

    <a id="Queue.quit/step"></a><a id="2845" href="Examples.Amortized.html#2845" class="Postulate">quit/step</a>    <a id="2858" class="Symbol">:</a> <a id="2860" class="Symbol">∀</a> <a id="2862" class="Symbol">{</a><a id="2863" href="Examples.Amortized.html#2863" class="Bound">c</a> <a id="2865" href="Examples.Amortized.html#2865" class="Bound">e</a><a id="2866" class="Symbol">}</a> <a id="2868" class="Symbol">→</a> <a id="2870" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a>    <a id="2884" class="Symbol">(</a><a id="2885" href="Calf.Step.html#385" class="Function">step</a> <a id="2890" class="Symbol">(</a><a id="2891" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="2897" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="2898" class="Symbol">)</a> <a id="2900" href="Examples.Amortized.html#2863" class="Bound">c</a> <a id="2902" href="Examples.Amortized.html#2865" class="Bound">e</a><a id="2903" class="Symbol">)</a> <a id="2905" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2907" href="Calf.Step.html#385" class="Function">step</a> <a id="2912" href="Examples.Amortized.html#835" class="Generalizable">X</a>                   <a id="2932" href="Examples.Amortized.html#2863" class="Bound">c</a> <a id="2934" class="Symbol">(</a><a id="2935" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a> <a id="2946" href="Examples.Amortized.html#2865" class="Bound">e</a><a id="2947" class="Symbol">)</a>
    <a id="Queue.enqueue/step"></a><a id="2953" href="Examples.Amortized.html#2953" class="Postulate">enqueue/step</a> <a id="2966" class="Symbol">:</a> <a id="2968" class="Symbol">∀</a> <a id="2970" class="Symbol">{</a><a id="2971" href="Examples.Amortized.html#2971" class="Bound">c</a> <a id="2973" href="Examples.Amortized.html#2973" class="Bound">e</a><a id="2974" class="Symbol">}</a> <a id="2976" class="Symbol">→</a> <a id="2978" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="2992" class="Symbol">(</a><a id="2993" href="Calf.Step.html#385" class="Function">step</a> <a id="2998" class="Symbol">(</a><a id="2999" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="3005" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="3006" class="Symbol">)</a> <a id="3008" href="Examples.Amortized.html#2971" class="Bound">c</a> <a id="3010" href="Examples.Amortized.html#2973" class="Bound">e</a><a id="3011" class="Symbol">)</a> <a id="3013" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3015" href="Calf.Step.html#385" class="Function">step</a> <a id="3020" class="Symbol">(</a><a id="3021" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="3023" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="3025" class="Symbol">λ</a> <a id="3027" href="Examples.Amortized.html#3027" class="Bound">_</a> <a id="3029" class="Symbol">→</a> <a id="3031" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="3037" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="3038" class="Symbol">)</a> <a id="3040" href="Examples.Amortized.html#2971" class="Bound">c</a> <a id="3042" class="Symbol">(</a><a id="3043" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="3057" href="Examples.Amortized.html#2973" class="Bound">e</a><a id="3058" class="Symbol">)</a>
    <a id="Queue.dequeue/step"></a><a id="3064" href="Examples.Amortized.html#3064" class="Postulate">dequeue/step</a> <a id="3077" class="Symbol">:</a> <a id="3079" class="Symbol">∀</a> <a id="3081" class="Symbol">{</a><a id="3082" href="Examples.Amortized.html#3082" class="Bound">c</a> <a id="3084" href="Examples.Amortized.html#3084" class="Bound">e</a><a id="3085" class="Symbol">}</a> <a id="3087" class="Symbol">→</a> <a id="3089" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="3103" class="Symbol">(</a><a id="3104" href="Calf.Step.html#385" class="Function">step</a> <a id="3109" class="Symbol">(</a><a id="3110" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="3116" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="3117" class="Symbol">)</a> <a id="3119" href="Examples.Amortized.html#3082" class="Bound">c</a> <a id="3121" href="Examples.Amortized.html#3084" class="Bound">e</a><a id="3122" class="Symbol">)</a> <a id="3124" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3126" href="Calf.Step.html#385" class="Function">step</a> <a id="3131" class="Symbol">(</a><a id="3132" href="Calf.Types.Maybe.html#196" class="Function">maybe</a> <a id="3138" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="3140" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="3142" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="3148" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="3149" class="Symbol">)</a> <a id="3151" href="Examples.Amortized.html#3082" class="Bound">c</a> <a id="3153" class="Symbol">(</a><a id="3154" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="3168" href="Examples.Amortized.html#3084" class="Bound">e</a><a id="3169" class="Symbol">)</a>
    <a id="3175" class="Symbol">{-#</a> <a id="3179" class="Keyword">REWRITE</a> <a id="3187" href="Examples.Amortized.html#2845" class="Postulate">quit/step</a> <a id="3197" href="Examples.Amortized.html#2953" class="Postulate">enqueue/step</a> <a id="3210" href="Examples.Amortized.html#3064" class="Postulate">dequeue/step</a> <a id="3223" class="Symbol">#-}</a>

  <a id="3230" class="Symbol">{-#</a> <a id="3234" class="Keyword">TERMINATING</a> <a id="3246" class="Symbol">#-}</a>
  <a id="Queue.list-queue"></a><a id="3252" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="3263" class="Symbol">:</a> <a id="3265" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="3269" class="Symbol">(</a><a id="3270" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="3272" class="Symbol">(</a><a id="3273" href="Calf.Types.List.html#221" class="Function">list</a> <a id="3278" href="Examples.Amortized.html#2518" class="Function">E</a><a id="3279" class="Symbol">)</a> <a id="3281" class="Symbol">λ</a> <a id="3283" href="Examples.Amortized.html#3283" class="Symbol">_</a> <a id="3285" class="Symbol">→</a> <a id="3287" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="3293" class="Symbol">(</a><a id="3294" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="3296" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="3300" class="Symbol">))</a>
  <a id="3305" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a> <a id="3316" class="Symbol">(</a><a id="3317" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="3328" href="Examples.Amortized.html#3328" class="Bound">l</a><a id="3329" class="Symbol">)</a> <a id="3331" class="Symbol">=</a> <a id="3333" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="3337" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a>
  <a id="3344" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="3358" class="Symbol">(</a><a id="3359" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="3370" href="Examples.Amortized.html#3370" class="Bound">l</a><a id="3371" class="Symbol">)</a> <a id="3373" href="Examples.Amortized.html#3373" class="Bound">e</a> <a id="3375" class="Symbol">=</a> <a id="3377" href="Calf.Step.html#385" class="Function">step</a> <a id="3382" class="Symbol">(</a><a id="3383" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="3389" class="Symbol">(</a><a id="3390" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="3392" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="3396" class="Symbol">))</a> <a id="3399" class="Symbol">(</a><a id="3400" href="Data.List.Base.html#4864" class="Function">length</a> <a id="3407" href="Examples.Amortized.html#3370" class="Bound">l</a><a id="3408" class="Symbol">)</a> <a id="3410" class="Symbol">(</a><a id="3411" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="3422" class="Symbol">(</a><a id="3423" href="Examples.Amortized.html#3370" class="Bound">l</a> <a id="3425" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="3428" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="3430" href="Examples.Amortized.html#3373" class="Bound">e</a> <a id="3432" href="Data.List.Base.html#5025" class="Function Operator">]</a><a id="3433" class="Symbol">))</a>
  <a id="3438" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="3452" class="Symbol">(</a><a id="3453" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="3464" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>     <a id="3471" class="Symbol">)</a> <a id="3473" class="Symbol">=</a> <a id="3475" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="3483" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3485" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="3496" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="3501" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="3515" class="Symbol">(</a><a id="3516" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="3527" class="Symbol">(</a><a id="3528" href="Examples.Amortized.html#3528" class="Bound">e</a> <a id="3530" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="3532" href="Examples.Amortized.html#3532" class="Bound">l</a><a id="3533" class="Symbol">))</a> <a id="3536" class="Symbol">=</a> <a id="3538" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="3543" href="Examples.Amortized.html#3528" class="Bound">e</a> <a id="3545" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3547" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="3558" href="Examples.Amortized.html#3532" class="Bound">l</a>

  <a id="3563" class="Symbol">{-#</a> <a id="3567" class="Keyword">TERMINATING</a> <a id="3579" class="Symbol">#-}</a>
  <a id="Queue.SPEC/list-queue"></a><a id="3585" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="3601" class="Symbol">:</a> <a id="3603" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="3607" class="Symbol">(</a><a id="3608" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="3610" class="Symbol">(</a><a id="3611" href="Calf.Types.List.html#221" class="Function">list</a> <a id="3616" href="Examples.Amortized.html#2518" class="Function">E</a><a id="3617" class="Symbol">)</a> <a id="3619" class="Symbol">λ</a> <a id="3621" href="Examples.Amortized.html#3621" class="Symbol">_</a> <a id="3623" class="Symbol">→</a> <a id="3625" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="3631" class="Symbol">(</a><a id="3632" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="3634" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="3638" class="Symbol">))</a>
  <a id="3643" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a> <a id="3654" class="Symbol">(</a><a id="3655" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="3671" href="Examples.Amortized.html#3671" class="Bound">l</a><a id="3672" class="Symbol">)</a> <a id="3674" class="Symbol">=</a> <a id="3676" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="3680" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a>
  <a id="3687" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="3701" class="Symbol">(</a><a id="3702" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="3718" href="Examples.Amortized.html#3718" class="Bound">l</a><a id="3719" class="Symbol">)</a> <a id="3721" href="Examples.Amortized.html#3721" class="Bound">e</a> <a id="3723" class="Symbol">=</a> <a id="3725" href="Calf.Step.html#385" class="Function">step</a> <a id="3730" class="Symbol">(</a><a id="3731" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="3737" class="Symbol">(</a><a id="3738" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="3740" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="3744" class="Symbol">))</a> <a id="3747" class="Number">1</a> <a id="3749" class="Symbol">(</a><a id="3750" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="3766" class="Symbol">(</a><a id="3767" href="Examples.Amortized.html#3718" class="Bound">l</a> <a id="3769" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="3772" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="3774" href="Examples.Amortized.html#3721" class="Bound">e</a> <a id="3776" href="Data.List.Base.html#5025" class="Function Operator">]</a><a id="3777" class="Symbol">))</a>
  <a id="3782" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="3796" class="Symbol">(</a><a id="3797" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="3813" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>     <a id="3820" class="Symbol">)</a> <a id="3822" class="Symbol">=</a> <a id="3824" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="3832" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3834" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="3850" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="3855" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="3869" class="Symbol">(</a><a id="3870" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="3886" class="Symbol">(</a><a id="3887" href="Examples.Amortized.html#3887" class="Bound">e</a> <a id="3889" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="3891" href="Examples.Amortized.html#3891" class="Bound">l</a><a id="3892" class="Symbol">))</a> <a id="3895" class="Symbol">=</a> <a id="3897" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="3902" href="Examples.Amortized.html#3887" class="Bound">e</a> <a id="3904" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3906" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="3922" href="Examples.Amortized.html#3891" class="Bound">l</a>

  <a id="Queue.Φ"></a><a id="3927" href="Examples.Amortized.html#3927" class="Function">Φ</a> <a id="3929" class="Symbol">:</a> <a id="3931" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="3935" class="Symbol">(</a><a id="3936" href="Calf.Types.List.html#221" class="Function">list</a> <a id="3941" href="Examples.Amortized.html#2518" class="Function">E</a><a id="3942" class="Symbol">)</a> <a id="3944" class="Symbol">→</a> <a id="3946" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="3950" class="Symbol">(</a><a id="3951" href="Calf.Types.List.html#221" class="Function">list</a> <a id="3956" href="Examples.Amortized.html#2518" class="Function">E</a><a id="3957" class="Symbol">)</a> <a id="3959" class="Symbol">→</a> <a id="3961" href="Calf.CostMonoid.html#3662" class="Function">ℂ</a>
  <a id="3965" href="Examples.Amortized.html#3927" class="Function">Φ</a> <a id="3967" href="Examples.Amortized.html#3967" class="Bound">bl</a> <a id="3970" href="Examples.Amortized.html#3970" class="Bound">fl</a> <a id="3973" class="Symbol">=</a> <a id="3975" href="Data.List.Base.html#4864" class="Function">length</a> <a id="3982" href="Examples.Amortized.html#3967" class="Bound">bl</a>

  <a id="3988" class="Symbol">{-#</a> <a id="3992" class="Keyword">TERMINATING</a> <a id="4004" class="Symbol">#-}</a>
  <a id="Queue.batched-queue"></a><a id="4010" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4024" class="Symbol">:</a> <a id="4026" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="4030" class="Symbol">(</a><a id="4031" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="4033" class="Symbol">(</a><a id="4034" href="Calf.Types.List.html#221" class="Function">list</a> <a id="4039" href="Examples.Amortized.html#2518" class="Function">E</a><a id="4040" class="Symbol">)</a> <a id="4042" class="Symbol">λ</a> <a id="4044" href="Examples.Amortized.html#4044" class="Symbol">_</a> <a id="4046" class="Symbol">→</a> <a id="4048" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="4050" class="Symbol">(</a><a id="4051" href="Calf.Types.List.html#221" class="Function">list</a> <a id="4056" href="Examples.Amortized.html#2518" class="Function">E</a><a id="4057" class="Symbol">)</a> <a id="4059" class="Symbol">λ</a> <a id="4061" href="Examples.Amortized.html#4061" class="Symbol">_</a> <a id="4063" class="Symbol">→</a> <a id="4065" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="4071" class="Symbol">(</a><a id="4072" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="4074" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="4078" class="Symbol">))</a>
  <a id="4083" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a> <a id="4094" class="Symbol">(</a><a id="4095" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4109" href="Examples.Amortized.html#4109" class="Bound">bl</a> <a id="4112" href="Examples.Amortized.html#4112" class="Bound">fl</a><a id="4114" class="Symbol">)</a> <a id="4116" class="Symbol">=</a> <a id="4118" href="Calf.Step.html#385" class="Function">step</a> <a id="4123" class="Symbol">(</a><a id="4124" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="4126" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="4130" class="Symbol">)</a> <a id="4132" class="Symbol">(</a><a id="4133" href="Examples.Amortized.html#3927" class="Function">Φ</a> <a id="4135" href="Examples.Amortized.html#4109" class="Bound">bl</a> <a id="4138" href="Examples.Amortized.html#4112" class="Bound">fl</a><a id="4140" class="Symbol">)</a> <a id="4142" class="Symbol">(</a><a id="4143" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="4147" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a><a id="4151" class="Symbol">)</a>
  <a id="4155" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="4169" class="Symbol">(</a><a id="4170" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4184" href="Examples.Amortized.html#4184" class="Bound">bl</a> <a id="4187" href="Examples.Amortized.html#4187" class="Bound">fl</a><a id="4189" class="Symbol">)</a> <a id="4191" href="Examples.Amortized.html#4191" class="Bound">e</a> <a id="4193" class="Symbol">=</a> <a id="4195" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4209" class="Symbol">(</a><a id="4210" href="Examples.Amortized.html#4191" class="Bound">e</a> <a id="4212" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4214" href="Examples.Amortized.html#4184" class="Bound">bl</a><a id="4216" class="Symbol">)</a> <a id="4218" href="Examples.Amortized.html#4187" class="Bound">fl</a>
  <a id="4223" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="4237" class="Symbol">(</a><a id="4238" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4252" href="Examples.Amortized.html#4252" class="Bound">bl</a> <a id="4255" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="4257" class="Symbol">)</a> <a id="4259" class="Keyword">with</a> <a id="4264" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="4272" href="Examples.Amortized.html#4252" class="Bound">bl</a>
  <a id="4277" class="Symbol">...</a> <a id="4281" class="Symbol">|</a> <a id="4283" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="4286" class="Symbol">=</a> <a id="4288" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="4296" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4298" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4312" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="4315" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="4320" class="Symbol">...</a> <a id="4324" class="Symbol">|</a> <a id="4326" href="Examples.Amortized.html#4326" class="Bound">e</a> <a id="4328" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4330" href="Examples.Amortized.html#4330" class="Bound">fl</a> <a id="4333" class="Symbol">=</a> <a id="4335" href="Calf.Step.html#385" class="Function">step</a> <a id="4340" class="Symbol">(</a><a id="4341" href="Calf.Types.Maybe.html#196" class="Function">maybe</a> <a id="4347" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="4349" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="4351" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="4357" class="Symbol">(</a><a id="4358" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="4360" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="4364" class="Symbol">))</a> <a id="4367" class="Symbol">(</a><a id="4368" href="Data.List.Base.html#4864" class="Function">length</a> <a id="4375" class="Bound">bl</a><a id="4377" class="Symbol">)</a> <a id="4379" class="Symbol">(</a><a id="4380" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="4385" href="Examples.Amortized.html#4326" class="Bound">e</a> <a id="4387" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4389" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4403" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="4406" href="Examples.Amortized.html#4330" class="Bound">fl</a><a id="4408" class="Symbol">)</a>
  <a id="4412" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="4426" class="Symbol">(</a><a id="4427" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4441" href="Examples.Amortized.html#4441" class="Bound">bl</a> <a id="4444" class="Symbol">(</a><a id="4445" href="Examples.Amortized.html#4445" class="Bound">e</a> <a id="4447" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4449" href="Examples.Amortized.html#4449" class="Bound">fl</a><a id="4451" class="Symbol">))</a> <a id="4454" class="Symbol">=</a> <a id="4456" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="4461" href="Examples.Amortized.html#4445" class="Bound">e</a> <a id="4463" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4465" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="4479" href="Examples.Amortized.html#4441" class="Bound">bl</a> <a id="4482" href="Examples.Amortized.html#4449" class="Bound">fl</a>

  <a id="4488" class="Symbol">{-#</a> <a id="4492" class="Keyword">TERMINATING</a> <a id="4504" class="Symbol">#-}</a>
  <a id="Queue.SPEC/batched-queue"></a><a id="4510" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4529" class="Symbol">:</a> <a id="4531" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="4535" class="Symbol">(</a><a id="4536" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="4538" class="Symbol">(</a><a id="4539" href="Calf.Types.List.html#221" class="Function">list</a> <a id="4544" href="Examples.Amortized.html#2518" class="Function">E</a><a id="4545" class="Symbol">)</a> <a id="4547" class="Symbol">λ</a> <a id="4549" href="Examples.Amortized.html#4549" class="Symbol">_</a> <a id="4551" class="Symbol">→</a> <a id="4553" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="4555" class="Symbol">(</a><a id="4556" href="Calf.Types.List.html#221" class="Function">list</a> <a id="4561" href="Examples.Amortized.html#2518" class="Function">E</a><a id="4562" class="Symbol">)</a> <a id="4564" class="Symbol">λ</a> <a id="4566" href="Examples.Amortized.html#4566" class="Symbol">_</a> <a id="4568" class="Symbol">→</a> <a id="4570" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="4576" class="Symbol">(</a><a id="4577" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="4579" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="4583" class="Symbol">))</a>
  <a id="4588" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a> <a id="4599" class="Symbol">(</a><a id="4600" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4619" href="Examples.Amortized.html#4619" class="Bound">bl</a> <a id="4622" href="Examples.Amortized.html#4622" class="Bound">fl</a><a id="4624" class="Symbol">)</a> <a id="4626" class="Symbol">=</a> <a id="4628" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="4632" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a>
  <a id="4639" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="4653" class="Symbol">(</a><a id="4654" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4673" href="Examples.Amortized.html#4673" class="Bound">bl</a> <a id="4676" href="Examples.Amortized.html#4676" class="Bound">fl</a><a id="4678" class="Symbol">)</a> <a id="4680" href="Examples.Amortized.html#4680" class="Bound">e</a> <a id="4682" class="Symbol">=</a> <a id="4684" href="Calf.Step.html#385" class="Function">step</a> <a id="4689" class="Symbol">(</a><a id="4690" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="4696" class="Symbol">(</a><a id="4697" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="4699" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="4703" class="Symbol">))</a> <a id="4706" class="Number">1</a> <a id="4708" class="Symbol">(</a><a id="4709" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4728" class="Symbol">(</a><a id="4729" href="Examples.Amortized.html#4680" class="Bound">e</a> <a id="4731" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4733" href="Examples.Amortized.html#4673" class="Bound">bl</a><a id="4735" class="Symbol">)</a> <a id="4737" href="Examples.Amortized.html#4676" class="Bound">fl</a><a id="4739" class="Symbol">)</a>
  <a id="4743" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="4757" class="Symbol">(</a><a id="4758" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4777" href="Examples.Amortized.html#4777" class="Bound">bl</a> <a id="4780" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="4782" class="Symbol">)</a> <a id="4784" class="Keyword">with</a> <a id="4789" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="4797" href="Examples.Amortized.html#4777" class="Bound">bl</a>
  <a id="4802" class="Symbol">...</a> <a id="4806" class="Symbol">|</a> <a id="4808" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="4811" class="Symbol">=</a> <a id="4813" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="4821" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4823" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4842" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="4845" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="4850" class="Symbol">...</a> <a id="4854" class="Symbol">|</a> <a id="4856" href="Examples.Amortized.html#4856" class="Bound">e</a> <a id="4858" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4860" href="Examples.Amortized.html#4860" class="Bound">fl</a> <a id="4863" class="Symbol">=</a> <a id="4865" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="4870" href="Examples.Amortized.html#4856" class="Bound">e</a> <a id="4872" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4874" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4893" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="4896" href="Examples.Amortized.html#4860" class="Bound">fl</a>
  <a id="4901" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="4915" class="Symbol">(</a><a id="4916" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4935" href="Examples.Amortized.html#4935" class="Bound">bl</a> <a id="4938" class="Symbol">(</a><a id="4939" href="Examples.Amortized.html#4939" class="Bound">e</a> <a id="4941" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4943" href="Examples.Amortized.html#4943" class="Bound">fl</a><a id="4945" class="Symbol">))</a> <a id="4948" class="Symbol">=</a> <a id="4950" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="4955" href="Examples.Amortized.html#4939" class="Bound">e</a> <a id="4957" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4959" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="4978" href="Examples.Amortized.html#4935" class="Bound">bl</a> <a id="4981" href="Examples.Amortized.html#4943" class="Bound">fl</a>

  <a id="4987" class="Keyword">record</a> <a id="Queue._≈_"></a><a id="4994" href="Examples.Amortized.html#4994" class="Record Operator">_≈_</a> <a id="4998" class="Symbol">(</a><a id="4999" href="Examples.Amortized.html#4999" class="Bound">q₁</a> <a id="5002" href="Examples.Amortized.html#5002" class="Bound">q₂</a> <a id="5005" class="Symbol">:</a> <a id="5007" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="5011" class="Symbol">(</a><a id="5012" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="5018" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="5019" class="Symbol">))</a> <a id="5022" class="Symbol">:</a> <a id="5024" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5028" class="Keyword">where</a>
    <a id="5038" class="Keyword">coinductive</a>
    <a id="5054" class="Keyword">field</a>
      <a id="Queue._≈_.quit"></a><a id="5066" href="Examples.Amortized.html#5066" class="Field">quit</a>    <a id="5074" class="Symbol">:</a> <a id="5076" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="5080" href="Function.Base.html#1919" class="Function Operator">$</a>
        <a id="5090" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="5095" class="Symbol">(</a><a id="5096" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a> <a id="5107" href="Examples.Amortized.html#4999" class="Bound">q₁</a> <a id="5110" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5112" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a> <a id="5123" href="Examples.Amortized.html#5002" class="Bound">q₂</a><a id="5125" class="Symbol">)</a>
      <a id="Queue._≈_.enqueue"></a><a id="5133" href="Examples.Amortized.html#5133" class="Field">enqueue</a> <a id="5141" class="Symbol">:</a> <a id="5143" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="5147" href="Function.Base.html#1919" class="Function Operator">$</a>
        <a id="5157" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="5159" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="5161" class="Symbol">λ</a> <a id="5163" href="Examples.Amortized.html#5163" class="Bound">e</a> <a id="5165" class="Symbol">→</a> <a id="5167" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="5172" class="Symbol">(</a><a id="5173" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="5187" href="Examples.Amortized.html#4999" class="Bound">q₁</a> <a id="5190" href="Examples.Amortized.html#5163" class="Bound">e</a> <a id="5192" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="5194" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="5208" href="Examples.Amortized.html#5002" class="Bound">q₂</a> <a id="5211" href="Examples.Amortized.html#5163" class="Bound">e</a><a id="5212" class="Symbol">)</a>
      <a id="Queue._≈_.dequeue"></a><a id="5220" href="Examples.Amortized.html#5220" class="Field">dequeue</a> <a id="5228" class="Symbol">:</a> <a id="5230" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="5234" href="Function.Base.html#1919" class="Function Operator">$</a>
        <a id="5244" class="Symbol">(</a><a id="5245" href="Calf.Metalanguage.html#352" class="Function">U</a> <a id="5247" class="Symbol">(</a><a id="5248" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="5253" class="Symbol">(</a><a id="5254" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="5260" class="Symbol">(</a><a id="5261" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="5275" href="Examples.Amortized.html#4999" class="Bound">q₁</a><a id="5277" class="Symbol">)</a> <a id="5279" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5281" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="5287" class="Symbol">(</a><a id="5288" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="5302" href="Examples.Amortized.html#5002" class="Bound">q₂</a><a id="5304" class="Symbol">))))</a> <a id="5309" href="Examples.Amortized.html#851" class="Function Operator">⋉</a>
        <a id="5319" class="Symbol">(</a><a id="5320" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="5325" class="Symbol">(</a><a id="5326" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5332" class="Symbol">(</a><a id="5333" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="5347" href="Examples.Amortized.html#4999" class="Bound">q₁</a><a id="5349" class="Symbol">)</a> <a id="5351" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="5353" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5359" class="Symbol">(</a><a id="5360" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="5374" href="Examples.Amortized.html#5002" class="Bound">q₂</a><a id="5376" class="Symbol">)))</a>

  <a id="Queue.≈-cong"></a><a id="5383" href="Examples.Amortized.html#5383" class="Function">≈-cong</a> <a id="5390" class="Symbol">:</a> <a id="5392" class="Symbol">(</a><a id="5393" href="Examples.Amortized.html#5393" class="Bound">c</a> <a id="5395" class="Symbol">:</a> <a id="5397" href="Calf.CostMonoid.html#3662" class="Function">ℂ</a><a id="5398" class="Symbol">)</a> <a id="5400" class="Symbol">{</a><a id="5401" href="Examples.Amortized.html#5401" class="Bound">x</a> <a id="5403" href="Examples.Amortized.html#5403" class="Bound">y</a> <a id="5405" class="Symbol">:</a> <a id="5407" href="Examples.Amortized.html#2589" class="Record">Queue</a> <a id="5413" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="5414" class="Symbol">}</a> <a id="5416" class="Symbol">→</a> <a id="5418" href="Examples.Amortized.html#5401" class="Bound">x</a> <a id="5420" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="5422" href="Examples.Amortized.html#5403" class="Bound">y</a> <a id="5424" class="Symbol">→</a> <a id="5426" href="Calf.Step.html#385" class="Function">step</a> <a id="5431" class="Symbol">(</a><a id="5432" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="5438" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="5439" class="Symbol">)</a> <a id="5441" href="Examples.Amortized.html#5393" class="Bound">c</a> <a id="5443" href="Examples.Amortized.html#5401" class="Bound">x</a> <a id="5445" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="5447" href="Calf.Step.html#385" class="Function">step</a> <a id="5452" class="Symbol">(</a><a id="5453" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="5459" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="5460" class="Symbol">)</a> <a id="5462" href="Examples.Amortized.html#5393" class="Bound">c</a> <a id="5464" href="Examples.Amortized.html#5403" class="Bound">y</a>
  <a id="5468" href="Examples.Amortized.html#5066" class="Field">_≈_.quit</a> <a id="5477" class="Symbol">(</a><a id="5478" href="Examples.Amortized.html#5383" class="Function">≈-cong</a> <a id="5485" class="Symbol">{</a><a id="5486" class="Argument">X</a> <a id="5488" class="Symbol">=</a> <a id="5490" href="Examples.Amortized.html#5490" class="Bound">X</a><a id="5491" class="Symbol">}</a> <a id="5493" href="Examples.Amortized.html#5493" class="Bound">c</a> <a id="5495" href="Examples.Amortized.html#5495" class="Bound">h</a><a id="5496" class="Symbol">)</a> <a id="5498" class="Symbol">=</a> <a id="5500" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="5508" class="Symbol">(</a><a id="5509" href="Calf.Step.html#385" class="Function">step</a> <a id="5514" href="Examples.Amortized.html#5490" class="Bound">X</a> <a id="5516" href="Examples.Amortized.html#5493" class="Bound">c</a><a id="5517" class="Symbol">)</a> <a id="5519" class="Symbol">(</a><a id="5520" href="Examples.Amortized.html#5066" class="Field">_≈_.quit</a> <a id="5529" href="Examples.Amortized.html#5495" class="Bound">h</a><a id="5530" class="Symbol">)</a>
  <a id="5534" href="Examples.Amortized.html#5133" class="Field">_≈_.enqueue</a> <a id="5546" class="Symbol">(</a><a id="5547" href="Examples.Amortized.html#5383" class="Function">≈-cong</a> <a id="5554" href="Examples.Amortized.html#5554" class="Bound">c</a> <a id="5556" href="Examples.Amortized.html#5556" class="Bound">h</a><a id="5557" class="Symbol">)</a> <a id="5559" href="Examples.Amortized.html#5559" class="Bound">e</a> <a id="5561" class="Symbol">=</a> <a id="5563" href="Examples.Amortized.html#5383" class="Function">≈-cong</a> <a id="5570" href="Examples.Amortized.html#5554" class="Bound">c</a> <a id="5572" class="Symbol">(</a><a id="5573" href="Examples.Amortized.html#5133" class="Field">_≈_.enqueue</a> <a id="5585" href="Examples.Amortized.html#5556" class="Bound">h</a> <a id="5587" href="Examples.Amortized.html#5559" class="Bound">e</a><a id="5588" class="Symbol">)</a>
  <a id="5592" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="5604" class="Symbol">(</a><a id="5605" href="Examples.Amortized.html#5383" class="Function">≈-cong</a> <a id="5612" href="Examples.Amortized.html#5612" class="Bound">c</a> <a id="5614" href="Examples.Amortized.html#5614" class="Bound">h</a><a id="5615" class="Symbol">)</a> <a id="5617" class="Symbol">=</a> <a id="5619" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="5625" class="Symbol">(</a><a id="5626" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="5638" href="Examples.Amortized.html#5614" class="Bound">h</a><a id="5639" class="Symbol">)</a> <a id="5641" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5643" href="Examples.Amortized.html#5383" class="Function">≈-cong</a> <a id="5650" href="Examples.Amortized.html#5612" class="Bound">c</a> <a id="5652" class="Symbol">(</a><a id="5653" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5659" class="Symbol">(</a><a id="5660" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="5672" href="Examples.Amortized.html#5614" class="Bound">h</a><a id="5673" class="Symbol">))</a>

  <a id="5679" class="Symbol">{-#</a> <a id="5683" class="Keyword">TERMINATING</a> <a id="5695" class="Symbol">#-}</a>
  <a id="Queue.batched-queue≈SPEC/batched-queue"></a><a id="5701" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="5734" class="Symbol">:</a> <a id="5736" class="Symbol">(</a><a id="5737" href="Examples.Amortized.html#5737" class="Bound">bl</a> <a id="5740" href="Examples.Amortized.html#5740" class="Bound">fl</a> <a id="5743" class="Symbol">:</a> <a id="5745" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="5749" class="Symbol">(</a><a id="5750" href="Calf.Types.List.html#221" class="Function">list</a> <a id="5755" href="Examples.Amortized.html#2518" class="Function">E</a><a id="5756" class="Symbol">))</a> <a id="5759" class="Symbol">→</a>
    <a id="5765" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="5779" href="Examples.Amortized.html#5737" class="Bound">bl</a> <a id="5782" href="Examples.Amortized.html#5740" class="Bound">fl</a> <a id="5785" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="5787" href="Calf.Step.html#385" class="Function">step</a> <a id="5792" class="Symbol">(</a><a id="5793" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="5799" class="Symbol">(</a><a id="5800" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="5802" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="5806" class="Symbol">))</a> <a id="5809" class="Symbol">(</a><a id="5810" href="Examples.Amortized.html#3927" class="Function">Φ</a> <a id="5812" href="Examples.Amortized.html#5737" class="Bound">bl</a> <a id="5815" href="Examples.Amortized.html#5740" class="Bound">fl</a><a id="5817" class="Symbol">)</a> <a id="5819" class="Symbol">(</a><a id="5820" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="5839" href="Examples.Amortized.html#5737" class="Bound">bl</a> <a id="5842" href="Examples.Amortized.html#5740" class="Bound">fl</a><a id="5844" class="Symbol">)</a>
  <a id="5848" href="Examples.Amortized.html#5066" class="Field">_≈_.quit</a> <a id="5857" class="Symbol">(</a><a id="5858" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="5891" href="Examples.Amortized.html#5891" class="Bound">bl</a> <a id="5894" href="Examples.Amortized.html#5894" class="Bound">fl</a><a id="5896" class="Symbol">)</a> <a id="5898" class="Symbol">=</a> <a id="5900" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="5907" href="Examples.Amortized.html#5133" class="Field">_≈_.enqueue</a> <a id="5919" class="Symbol">(</a><a id="5920" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="5953" href="Examples.Amortized.html#5953" class="Bound">bl</a> <a id="5956" href="Examples.Amortized.html#5956" class="Bound">fl</a><a id="5958" class="Symbol">)</a> <a id="5960" href="Examples.Amortized.html#5960" class="Bound">e</a> <a id="5962" class="Symbol">=</a>
    <a id="5968" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">Eq.subst</a>
      <a id="5983" class="Symbol">(λ</a> <a id="5986" href="Examples.Amortized.html#5986" class="Bound">c</a> <a id="5988" class="Symbol">→</a> <a id="5990" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="6004" class="Symbol">(</a><a id="6005" href="Examples.Amortized.html#5960" class="Bound">e</a> <a id="6007" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6009" href="Examples.Amortized.html#5953" class="Bound">bl</a><a id="6011" class="Symbol">)</a> <a id="6013" href="Examples.Amortized.html#5956" class="Bound">fl</a> <a id="6016" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="6018" href="Calf.Step.html#385" class="Function">step</a> <a id="6023" class="Symbol">(</a><a id="6024" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="6030" class="Symbol">(</a><a id="6031" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="6033" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="6037" class="Symbol">))</a> <a id="6040" href="Examples.Amortized.html#5986" class="Bound">c</a> <a id="6042" class="Symbol">(</a><a id="6043" href="Examples.Amortized.html#4510" class="Function">SPEC/batched-queue</a> <a id="6062" class="Symbol">(</a><a id="6063" href="Examples.Amortized.html#5960" class="Bound">e</a> <a id="6065" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6067" href="Examples.Amortized.html#5953" class="Bound">bl</a><a id="6069" class="Symbol">)</a> <a id="6071" href="Examples.Amortized.html#5956" class="Bound">fl</a><a id="6073" class="Symbol">))</a>
      <a id="6082" class="Symbol">(</a><a id="6083" href="Data.Nat.Properties.html#13395" class="Function">Nat.+-comm</a> <a id="6094" class="Number">1</a> <a id="6096" class="Symbol">(</a><a id="6097" href="Data.List.Base.html#4864" class="Function">length</a> <a id="6104" href="Examples.Amortized.html#5953" class="Bound">bl</a><a id="6106" class="Symbol">))</a>
      <a id="6115" class="Symbol">(</a><a id="6116" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6149" class="Symbol">(</a><a id="6150" href="Examples.Amortized.html#5960" class="Bound">e</a> <a id="6152" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6154" href="Examples.Amortized.html#5953" class="Bound">bl</a><a id="6156" class="Symbol">)</a> <a id="6158" href="Examples.Amortized.html#5956" class="Bound">fl</a><a id="6160" class="Symbol">)</a>
  <a id="6164" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="6176" class="Symbol">(</a><a id="6177" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6210" href="Examples.Amortized.html#6210" class="Bound">bl</a> <a id="6213" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="6215" class="Symbol">)</a> <a id="6217" class="Keyword">with</a> <a id="6222" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="6230" href="Examples.Amortized.html#6210" class="Bound">bl</a> <a id="6233" class="Symbol">|</a> <a id="6235" href="Data.List.Properties.html#35192" class="Function">List.reverse-injective</a> <a id="6258" class="Symbol">{</a><a id="6259" class="Argument">xs</a> <a id="6262" class="Symbol">=</a> <a id="6264" href="Examples.Amortized.html#6210" class="Bound">bl</a><a id="6266" class="Symbol">}</a> <a id="6268" class="Symbol">{</a><a id="6269" class="Argument">ys</a> <a id="6272" class="Symbol">=</a> <a id="6274" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="6276" class="Symbol">}</a>
  <a id="6280" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="6292" class="Symbol">(</a><a id="6293" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6326" href="Examples.Amortized.html#6326" class="Bound">bl</a> <a id="6329" class="InductiveConstructor">[]</a><a id="6331" class="Symbol">)</a> <a id="6333" class="Symbol">|</a> <a id="6335" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="6338" class="Symbol">|</a> <a id="6340" href="Examples.Amortized.html#6340" class="Bound">h</a> <a id="6342" class="Keyword">with</a> <a id="6347" href="Examples.Amortized.html#6340" class="Bound">h</a> <a id="6349" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="6356" class="Symbol">...</a> <a id="6360" class="Symbol">|</a> <a id="6362" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="6367" class="Symbol">=</a> <a id="6369" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="6374" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6376" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6409" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="6412" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="6417" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="6429" class="Symbol">(</a><a id="6430" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6463" href="Examples.Amortized.html#6463" class="Bound">bl</a> <a id="6466" class="InductiveConstructor">[]</a><a id="6468" class="Symbol">)</a> <a id="6470" class="Symbol">|</a> <a id="6472" href="Examples.Amortized.html#6472" class="Bound">e</a> <a id="6474" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6476" href="Examples.Amortized.html#6476" class="Bound">fl</a> <a id="6479" class="Symbol">|</a> <a id="6481" class="Symbol">_</a> <a id="6483" class="Symbol">=</a>
    <a id="6489" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="6494" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6496" href="Examples.Amortized.html#5383" class="Function">≈-cong</a> <a id="6503" class="Symbol">(</a><a id="6504" href="Examples.Amortized.html#3927" class="Function">Φ</a> <a id="6506" href="Examples.Amortized.html#6463" class="Bound">bl</a> <a id="6509" href="Examples.Amortized.html#6476" class="Bound">fl</a><a id="6511" class="Symbol">)</a> <a id="6513" class="Symbol">(</a><a id="6514" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6547" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="6550" href="Examples.Amortized.html#6476" class="Bound">fl</a><a id="6552" class="Symbol">)</a>
  <a id="6556" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="6568" class="Symbol">(</a><a id="6569" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6602" href="Examples.Amortized.html#6602" class="Bound">bl</a> <a id="6605" class="Symbol">(</a><a id="6606" href="Examples.Amortized.html#6606" class="Bound">e</a> <a id="6608" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6610" href="Examples.Amortized.html#6610" class="Bound">fl</a><a id="6612" class="Symbol">))</a> <a id="6615" class="Symbol">=</a>
    <a id="6621" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="6626" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6628" href="Examples.Amortized.html#5701" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6661" href="Examples.Amortized.html#6602" class="Bound">bl</a> <a id="6664" href="Examples.Amortized.html#6610" class="Bound">fl</a>

  <a id="6670" class="Symbol">{-#</a> <a id="6674" class="Keyword">TERMINATING</a> <a id="6686" class="Symbol">#-}</a>
  <a id="Queue.batched-queue≈SPEC/list-queue"></a><a id="6692" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="6722" class="Symbol">:</a> <a id="6724" class="Symbol">(</a><a id="6725" href="Examples.Amortized.html#6725" class="Bound">bl</a> <a id="6728" href="Examples.Amortized.html#6728" class="Bound">fl</a> <a id="6731" class="Symbol">:</a> <a id="6733" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="6737" class="Symbol">(</a><a id="6738" href="Calf.Types.List.html#221" class="Function">list</a> <a id="6743" href="Examples.Amortized.html#2518" class="Function">E</a><a id="6744" class="Symbol">))</a> <a id="6747" class="Symbol">→</a>
    <a id="6753" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="6767" href="Examples.Amortized.html#6725" class="Bound">bl</a> <a id="6770" href="Examples.Amortized.html#6728" class="Bound">fl</a> <a id="6773" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="6775" href="Calf.Step.html#385" class="Function">step</a> <a id="6780" class="Symbol">(</a><a id="6781" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="6787" class="Symbol">(</a><a id="6788" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="6790" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="6794" class="Symbol">))</a> <a id="6797" class="Symbol">(</a><a id="6798" href="Examples.Amortized.html#3927" class="Function">Φ</a> <a id="6800" href="Examples.Amortized.html#6725" class="Bound">bl</a> <a id="6803" href="Examples.Amortized.html#6728" class="Bound">fl</a><a id="6805" class="Symbol">)</a> <a id="6807" class="Symbol">(</a><a id="6808" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="6824" class="Symbol">(</a><a id="6825" href="Examples.Amortized.html#6728" class="Bound">fl</a> <a id="6828" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="6831" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="6839" href="Examples.Amortized.html#6725" class="Bound">bl</a><a id="6841" class="Symbol">))</a>
  <a id="6846" href="Examples.Amortized.html#5066" class="Field">_≈_.quit</a> <a id="6855" class="Symbol">(</a><a id="6856" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="6886" href="Examples.Amortized.html#6886" class="Bound">bl</a> <a id="6889" href="Examples.Amortized.html#6889" class="Bound">fl</a><a id="6891" class="Symbol">)</a> <a id="6893" class="Symbol">=</a> <a id="6895" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="6902" href="Examples.Amortized.html#5133" class="Field">_≈_.enqueue</a> <a id="6914" class="Symbol">(</a><a id="6915" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="6945" href="Examples.Amortized.html#6945" class="Bound">bl</a> <a id="6948" href="Examples.Amortized.html#6948" class="Bound">fl</a><a id="6950" class="Symbol">)</a> <a id="6952" href="Examples.Amortized.html#6952" class="Bound">e</a> <a id="6954" class="Symbol">=</a>
    <a id="6960" href="Relation.Binary.PropositionalEquality.Core.html#1835" class="Function">Eq.subst₂</a>
      <a id="6976" class="Symbol">(λ</a> <a id="6979" href="Examples.Amortized.html#6979" class="Bound">c</a> <a id="6981" href="Examples.Amortized.html#6981" class="Bound">l</a> <a id="6983" class="Symbol">→</a> <a id="6985" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="6999" class="Symbol">(</a><a id="7000" href="Examples.Amortized.html#6952" class="Bound">e</a> <a id="7002" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7004" href="Examples.Amortized.html#6945" class="Bound">bl</a><a id="7006" class="Symbol">)</a> <a id="7008" href="Examples.Amortized.html#6948" class="Bound">fl</a> <a id="7011" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="7013" href="Calf.Step.html#385" class="Function">step</a> <a id="7018" class="Symbol">(</a><a id="7019" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="7025" class="Symbol">(</a><a id="7026" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="7028" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="7032" class="Symbol">))</a> <a id="7035" href="Examples.Amortized.html#6979" class="Bound">c</a> <a id="7037" class="Symbol">(</a><a id="7038" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="7054" href="Examples.Amortized.html#6981" class="Bound">l</a><a id="7055" class="Symbol">))</a>
      <a id="7064" class="Symbol">(</a><a id="7065" href="Data.Nat.Properties.html#13395" class="Function">Nat.+-comm</a> <a id="7076" class="Number">1</a> <a id="7078" class="Symbol">(</a><a id="7079" href="Data.List.Base.html#4864" class="Function">length</a> <a id="7086" href="Examples.Amortized.html#6945" class="Bound">bl</a><a id="7088" class="Symbol">))</a>
      <a id="7097" class="Symbol">(</a><a id="7098" class="Keyword">let</a> <a id="7102" class="Keyword">open</a> <a id="7107" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a> <a id="7119" class="Keyword">in</a>
      <a id="7128" href="Relation.Binary.PropositionalEquality.Core.html#2806" class="Function Operator">begin</a>
        <a id="7142" href="Examples.Amortized.html#6948" class="Bound">fl</a> <a id="7145" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="7148" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="7156" class="Symbol">(</a><a id="7157" href="Examples.Amortized.html#6952" class="Bound">e</a> <a id="7159" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7161" href="Examples.Amortized.html#6945" class="Bound">bl</a><a id="7163" class="Symbol">)</a>
      <a id="7171" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="7174" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="7182" class="Symbol">(</a><a id="7183" href="Examples.Amortized.html#6948" class="Bound">fl</a> <a id="7186" href="Data.List.Base.html#1810" class="Function Operator">++_</a><a id="7189" class="Symbol">)</a> <a id="7191" class="Symbol">(</a><a id="7192" href="Data.List.Properties.html#34401" class="Function">List.unfold-reverse</a> <a id="7212" href="Examples.Amortized.html#6952" class="Bound">e</a> <a id="7214" href="Examples.Amortized.html#6945" class="Bound">bl</a><a id="7216" class="Symbol">)</a> <a id="7218" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="7228" href="Examples.Amortized.html#6948" class="Bound">fl</a> <a id="7231" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="7234" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="7242" href="Examples.Amortized.html#6945" class="Bound">bl</a> <a id="7245" href="Data.List.Base.html#10043" class="Function Operator">∷ʳ</a> <a id="7248" href="Examples.Amortized.html#6952" class="Bound">e</a>
      <a id="7256" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">≡˘⟨</a> <a id="7260" href="Data.List.Properties.html#5425" class="Function">List.++-assoc</a> <a id="7274" href="Examples.Amortized.html#6948" class="Bound">fl</a> <a id="7277" class="Symbol">(</a><a id="7278" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="7286" href="Examples.Amortized.html#6945" class="Bound">bl</a><a id="7288" class="Symbol">)</a> <a id="7290" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="7292" href="Examples.Amortized.html#6952" class="Bound">e</a> <a id="7294" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="7296" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">⟩</a>
        <a id="7306" class="Symbol">(</a><a id="7307" href="Examples.Amortized.html#6948" class="Bound">fl</a> <a id="7310" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="7313" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="7321" href="Examples.Amortized.html#6945" class="Bound">bl</a><a id="7323" class="Symbol">)</a> <a id="7325" href="Data.List.Base.html#10043" class="Function Operator">∷ʳ</a> <a id="7328" href="Examples.Amortized.html#6952" class="Bound">e</a>
      <a id="7336" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a><a id="7337" class="Symbol">)</a>
      <a id="7345" class="Symbol">(</a><a id="7346" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7376" class="Symbol">(</a><a id="7377" href="Examples.Amortized.html#6952" class="Bound">e</a> <a id="7379" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7381" href="Examples.Amortized.html#6945" class="Bound">bl</a><a id="7383" class="Symbol">)</a> <a id="7385" href="Examples.Amortized.html#6948" class="Bound">fl</a><a id="7387" class="Symbol">)</a>
  <a id="7391" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="7403" class="Symbol">(</a><a id="7404" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7434" href="Examples.Amortized.html#7434" class="Bound">bl</a> <a id="7437" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="7439" class="Symbol">)</a> <a id="7441" class="Keyword">with</a> <a id="7446" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="7454" href="Examples.Amortized.html#7434" class="Bound">bl</a> <a id="7457" class="Symbol">|</a> <a id="7459" href="Data.List.Properties.html#35192" class="Function">List.reverse-injective</a> <a id="7482" class="Symbol">{</a><a id="7483" class="Argument">xs</a> <a id="7486" class="Symbol">=</a> <a id="7488" href="Examples.Amortized.html#7434" class="Bound">bl</a><a id="7490" class="Symbol">}</a> <a id="7492" class="Symbol">{</a><a id="7493" class="Argument">ys</a> <a id="7496" class="Symbol">=</a> <a id="7498" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="7500" class="Symbol">}</a>
  <a id="7504" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="7516" class="Symbol">(</a><a id="7517" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7547" href="Examples.Amortized.html#7547" class="Bound">bl</a> <a id="7550" class="InductiveConstructor">[]</a><a id="7552" class="Symbol">)</a> <a id="7554" class="Symbol">|</a> <a id="7556" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7559" class="Symbol">|</a> <a id="7561" href="Examples.Amortized.html#7561" class="Bound">h</a> <a id="7563" class="Keyword">with</a> <a id="7568" href="Examples.Amortized.html#7561" class="Bound">h</a> <a id="7570" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="7577" class="Symbol">...</a> <a id="7581" class="Symbol">|</a> <a id="7583" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="7588" class="Symbol">=</a>
    <a id="7594" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="7599" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7601" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7631" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7634" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="7639" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="7651" class="Symbol">(</a><a id="7652" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7682" href="Examples.Amortized.html#7682" class="Bound">bl</a> <a id="7685" class="InductiveConstructor">[]</a><a id="7687" class="Symbol">)</a> <a id="7689" class="Symbol">|</a> <a id="7691" href="Examples.Amortized.html#7691" class="Bound">e</a> <a id="7693" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7695" href="Examples.Amortized.html#7695" class="Bound">fl</a> <a id="7698" class="Symbol">|</a> <a id="7700" class="Symbol">_</a> <a id="7702" class="Symbol">=</a>
    <a id="7708" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="7713" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a>
    <a id="7719" href="Examples.Amortized.html#5383" class="Function">≈-cong</a> <a id="7726" class="Symbol">(</a><a id="7727" href="Data.List.Base.html#4864" class="Function">length</a> <a id="7734" href="Examples.Amortized.html#7682" class="Bound">bl</a><a id="7736" class="Symbol">)</a>
      <a id="7744" class="Symbol">(</a> <a id="7746" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">Eq.subst</a>
          <a id="7765" class="Symbol">(λ</a> <a id="7768" href="Examples.Amortized.html#7768" class="Bound">l</a> <a id="7770" class="Symbol">→</a> <a id="7772" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="7786" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7789" href="Examples.Amortized.html#7695" class="Bound">fl</a> <a id="7792" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="7794" href="Examples.Amortized.html#3585" class="Function">SPEC/list-queue</a> <a id="7810" href="Examples.Amortized.html#7768" class="Bound">l</a><a id="7811" class="Symbol">)</a>
          <a id="7823" class="Symbol">(</a><a id="7824" href="Data.List.Properties.html#5613" class="Function">List.++-identityʳ</a> <a id="7842" href="Examples.Amortized.html#7695" class="Bound">fl</a><a id="7844" class="Symbol">)</a>
          <a id="7856" class="Symbol">(</a><a id="7857" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7887" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7890" href="Examples.Amortized.html#7695" class="Bound">fl</a><a id="7892" class="Symbol">)</a>
      <a id="7900" class="Symbol">)</a>
  <a id="7904" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="7916" class="Symbol">(</a><a id="7917" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7947" href="Examples.Amortized.html#7947" class="Bound">bl</a> <a id="7950" class="Symbol">(</a><a id="7951" href="Examples.Amortized.html#7951" class="Bound">e</a> <a id="7953" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7955" href="Examples.Amortized.html#7955" class="Bound">fl</a><a id="7957" class="Symbol">))</a> <a id="7960" class="Symbol">=</a>
    <a id="7966" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="7971" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7973" href="Examples.Amortized.html#6692" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8003" href="Examples.Amortized.html#7947" class="Bound">bl</a> <a id="8006" href="Examples.Amortized.html#7955" class="Bound">fl</a>

  <a id="8012" class="Comment">-- {-# TERMINATING #-}</a>
  <a id="8037" class="Comment">-- fake-queue : cmp (queue (F unit))</a>
  <a id="8076" class="Comment">-- Queue.quit fake-queue = ret triv</a>
  <a id="8114" class="Comment">-- Queue.enqueue fake-queue e = fake-queue</a>
  <a id="8159" class="Comment">-- Queue.dequeue fake-queue = nothing , fake-queue</a>

  <a id="8213" class="Comment">-- issue : (c₁ c₂ : ℂ) → step (queue (F unit)) c₁ fake-queue ≈ step (queue (F unit)) c₂ fake-queue</a>
  <a id="8314" class="Comment">-- _≈_.quit (issue c₁ c₂) = {!   !}</a>
  <a id="8352" class="Comment">-- _≈_.enqueue (issue c₁ c₂) e = issue c₁ c₂</a>
  <a id="8399" class="Comment">-- _≈_.dequeue (issue c₁ c₂) =</a>
  <a id="8432" class="Comment">--   refl , issue c₁ c₂</a>


  <a id="8460" class="Symbol">{-#</a> <a id="8464" class="Keyword">TERMINATING</a> <a id="8476" class="Symbol">#-}</a>
  <a id="Queue.◯[list-queue≈batched-queue]"></a><a id="8482" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="8510" class="Symbol">:</a> <a id="8512" class="Symbol">(</a><a id="8513" href="Examples.Amortized.html#8513" class="Bound">bl</a> <a id="8516" href="Examples.Amortized.html#8516" class="Bound">fl</a> <a id="8519" class="Symbol">:</a> <a id="8521" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="8525" class="Symbol">(</a><a id="8526" href="Calf.Types.List.html#221" class="Function">list</a> <a id="8531" href="Examples.Amortized.html#2518" class="Function">E</a><a id="8532" class="Symbol">))</a> <a id="8535" class="Symbol">→</a> <a id="8537" href="Calf.PhaseDistinction.html#315" class="Function">◯</a> <a id="8539" class="Symbol">(</a><a id="8540" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="8551" class="Symbol">(</a><a id="8552" href="Examples.Amortized.html#8516" class="Bound">fl</a> <a id="8555" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="8558" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="8566" href="Examples.Amortized.html#8513" class="Bound">bl</a><a id="8568" class="Symbol">)</a> <a id="8570" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="8572" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="8586" href="Examples.Amortized.html#8513" class="Bound">bl</a> <a id="8589" href="Examples.Amortized.html#8516" class="Bound">fl</a><a id="8591" class="Symbol">)</a>
  <a id="8595" href="Examples.Amortized.html#5066" class="Field">_≈_.quit</a> <a id="8604" class="Symbol">(</a><a id="8605" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="8633" href="Examples.Amortized.html#8633" class="Bound">bl</a> <a id="8636" href="Examples.Amortized.html#8636" class="Bound">fl</a> <a id="8639" href="Examples.Amortized.html#8639" class="Bound">u</a><a id="8640" class="Symbol">)</a> <a id="8642" class="Symbol">=</a>
    <a id="8648" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">Eq.sym</a> <a id="8655" class="Symbol">(</a><a id="8656" href="Calf.Step.html#1579" class="Function">step/ext</a> <a id="8665" class="Symbol">(</a><a id="8666" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="8668" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="8672" class="Symbol">)</a> <a id="8674" class="Symbol">(</a><a id="8675" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="8679" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a><a id="8683" class="Symbol">)</a> <a id="8685" class="Symbol">(</a><a id="8686" href="Data.List.Base.html#4864" class="Function">length</a> <a id="8693" href="Examples.Amortized.html#8633" class="Bound">bl</a><a id="8695" class="Symbol">)</a> <a id="8697" href="Examples.Amortized.html#8639" class="Bound">u</a><a id="8698" class="Symbol">)</a>
  <a id="8702" href="Examples.Amortized.html#5133" class="Field">_≈_.enqueue</a> <a id="8714" class="Symbol">(</a><a id="8715" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="8743" href="Examples.Amortized.html#8743" class="Bound">bl</a> <a id="8746" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="8749" href="Examples.Amortized.html#8749" class="Bound">u</a><a id="8750" class="Symbol">)</a> <a id="8752" href="Examples.Amortized.html#8752" class="Bound">e</a> <a id="8754" class="Symbol">=</a>
    <a id="8760" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">Eq.subst</a>
      <a id="8775" class="Symbol">(</a><a id="8776" href="Examples.Amortized.html#4994" class="Record Operator">_≈</a> <a id="8779" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="8793" class="Symbol">(</a><a id="8794" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="8808" href="Examples.Amortized.html#8743" class="Bound">bl</a> <a id="8811" href="Examples.Amortized.html#8746" class="Bound">fl</a><a id="8813" class="Symbol">)</a> <a id="8815" href="Examples.Amortized.html#8752" class="Bound">e</a><a id="8816" class="Symbol">)</a>
      <a id="8824" class="Symbol">(</a><a id="8825" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">Eq.sym</a> <a id="8832" class="Symbol">(</a><a id="8833" href="Calf.Step.html#1579" class="Function">step/ext</a> <a id="8842" class="Symbol">(</a><a id="8843" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="8849" class="Symbol">(</a><a id="8850" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="8852" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="8856" class="Symbol">))</a> <a id="8859" class="Symbol">(</a><a id="8860" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="8871" class="Symbol">_)</a> <a id="8874" class="Symbol">(</a><a id="8875" href="Data.List.Base.html#4864" class="Function">length</a> <a id="8882" class="Symbol">(</a><a id="8883" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="8886" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="8889" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="8897" href="Examples.Amortized.html#8743" class="Bound">bl</a><a id="8899" class="Symbol">))</a> <a id="8902" href="Examples.Amortized.html#8749" class="Bound">u</a><a id="8903" class="Symbol">))</a>
      <a id="8912" class="Symbol">(</a><a id="8913" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">Eq.subst</a>
        <a id="8930" class="Symbol">(λ</a> <a id="8933" href="Examples.Amortized.html#8933" class="Bound">l</a> <a id="8935" class="Symbol">→</a> <a id="8937" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="8948" href="Examples.Amortized.html#8933" class="Bound">l</a> <a id="8950" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="8952" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="8966" class="Symbol">(</a><a id="8967" href="Examples.Amortized.html#8752" class="Bound">e</a> <a id="8969" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8971" href="Examples.Amortized.html#8743" class="Bound">bl</a><a id="8973" class="Symbol">)</a> <a id="8975" href="Examples.Amortized.html#8746" class="Bound">fl</a><a id="8977" class="Symbol">)</a>
        <a id="8987" class="Symbol">{</a><a id="8988" class="Argument">x</a> <a id="8990" class="Symbol">=</a> <a id="8992" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="8995" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="8998" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="9006" class="Symbol">(</a><a id="9007" href="Examples.Amortized.html#8752" class="Bound">e</a> <a id="9009" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9011" href="Examples.Amortized.html#8743" class="Bound">bl</a><a id="9013" class="Symbol">)}</a>
        <a id="9024" class="Symbol">(</a><a id="9025" class="Keyword">let</a> <a id="9029" class="Keyword">open</a> <a id="9034" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a> <a id="9046" class="Keyword">in</a>
        <a id="9057" href="Relation.Binary.PropositionalEquality.Core.html#2806" class="Function Operator">begin</a>
          <a id="9073" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="9076" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="9079" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="9087" class="Symbol">(</a><a id="9088" href="Examples.Amortized.html#8752" class="Bound">e</a> <a id="9090" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9092" href="Examples.Amortized.html#8743" class="Bound">bl</a><a id="9094" class="Symbol">)</a>
        <a id="9104" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="9107" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="9115" class="Symbol">(</a><a id="9116" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="9119" href="Data.List.Base.html#1810" class="Function Operator">++_</a><a id="9122" class="Symbol">)</a> <a id="9124" class="Symbol">(</a><a id="9125" href="Data.List.Properties.html#34401" class="Function">List.unfold-reverse</a> <a id="9145" href="Examples.Amortized.html#8752" class="Bound">e</a> <a id="9147" href="Examples.Amortized.html#8743" class="Bound">bl</a><a id="9149" class="Symbol">)</a> <a id="9151" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
          <a id="9163" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="9166" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="9169" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="9177" href="Examples.Amortized.html#8743" class="Bound">bl</a> <a id="9180" href="Data.List.Base.html#10043" class="Function Operator">∷ʳ</a> <a id="9183" href="Examples.Amortized.html#8752" class="Bound">e</a>
        <a id="9193" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">≡˘⟨</a> <a id="9197" href="Data.List.Properties.html#5425" class="Function">List.++-assoc</a> <a id="9211" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="9214" class="Symbol">(</a><a id="9215" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="9223" href="Examples.Amortized.html#8743" class="Bound">bl</a><a id="9225" class="Symbol">)</a> <a id="9227" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="9229" href="Examples.Amortized.html#8752" class="Bound">e</a> <a id="9231" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="9233" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">⟩</a>
          <a id="9245" class="Symbol">(</a><a id="9246" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="9249" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="9252" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="9260" href="Examples.Amortized.html#8743" class="Bound">bl</a><a id="9262" class="Symbol">)</a> <a id="9264" href="Data.List.Base.html#10043" class="Function Operator">∷ʳ</a> <a id="9267" href="Examples.Amortized.html#8752" class="Bound">e</a>
        <a id="9277" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a><a id="9278" class="Symbol">)</a>
        <a id="9288" class="Symbol">(</a><a id="9289" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="9317" class="Symbol">(</a><a id="9318" href="Examples.Amortized.html#8752" class="Bound">e</a> <a id="9320" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9322" href="Examples.Amortized.html#8743" class="Bound">bl</a><a id="9324" class="Symbol">)</a> <a id="9326" href="Examples.Amortized.html#8746" class="Bound">fl</a> <a id="9329" href="Examples.Amortized.html#8749" class="Bound">u</a><a id="9330" class="Symbol">))</a>
  <a id="9335" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="9347" class="Symbol">(</a><a id="9348" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="9376" href="Examples.Amortized.html#9376" class="Bound">bl</a> <a id="9379" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="9382" href="Examples.Amortized.html#9382" class="Bound">u</a><a id="9383" class="Symbol">)</a> <a id="9385" class="Keyword">with</a> <a id="9390" href="Data.List.Base.html#9817" class="Function">reverse</a> <a id="9398" href="Examples.Amortized.html#9376" class="Bound">bl</a> <a id="9401" class="Symbol">|</a> <a id="9403" href="Data.List.Properties.html#35192" class="Function">List.reverse-injective</a> <a id="9426" class="Symbol">{</a><a id="9427" class="Argument">xs</a> <a id="9430" class="Symbol">=</a> <a id="9432" href="Examples.Amortized.html#9376" class="Bound">bl</a><a id="9434" class="Symbol">}</a> <a id="9436" class="Symbol">{</a><a id="9437" class="Argument">ys</a> <a id="9440" class="Symbol">=</a> <a id="9442" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="9444" class="Symbol">}</a>
  <a id="9448" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="9460" class="Symbol">(</a><a id="9461" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="9489" href="Examples.Amortized.html#9489" class="Bound">bl</a> <a id="9492" class="InductiveConstructor">[]</a> <a id="9495" href="Examples.Amortized.html#9495" class="Bound">u</a><a id="9496" class="Symbol">)</a> <a id="9498" class="Symbol">|</a> <a id="9500" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="9503" class="Symbol">|</a> <a id="9505" href="Examples.Amortized.html#9505" class="Bound">h</a> <a id="9507" class="Keyword">with</a> <a id="9512" href="Examples.Amortized.html#9505" class="Bound">h</a> <a id="9514" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="9521" class="Symbol">...</a> <a id="9525" class="Symbol">|</a> <a id="9527" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="9532" class="Symbol">=</a>
    <a id="9538" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="9543" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9545" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="9573" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="9576" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="9579" class="Bound">u</a>
  <a id="9583" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="9595" class="Symbol">(</a><a id="9596" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="9624" href="Examples.Amortized.html#9624" class="Bound">bl</a> <a id="9627" class="InductiveConstructor">[]</a> <a id="9630" href="Examples.Amortized.html#9630" class="Bound">u</a><a id="9631" class="Symbol">)</a> <a id="9633" class="Symbol">|</a> <a id="9635" href="Examples.Amortized.html#9635" class="Bound">e</a> <a id="9637" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9639" href="Examples.Amortized.html#9639" class="Bound">fl</a> <a id="9642" class="Symbol">|</a> <a id="9644" class="Symbol">_</a> <a id="9646" class="Symbol">=</a>
    <a id="9652" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="9657" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a>
    <a id="9663" href="Relation.Binary.PropositionalEquality.Core.html#1835" class="Function">Eq.subst₂</a>
      <a id="9679" href="Examples.Amortized.html#4994" class="Record Operator">_≈_</a>
      <a id="9689" class="Symbol">(</a><a id="9690" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="9698" href="Examples.Amortized.html#3252" class="Function">list-queue</a> <a id="9709" class="Symbol">(</a><a id="9710" href="Data.List.Properties.html#5613" class="Function">List.++-identityʳ</a> <a id="9728" href="Examples.Amortized.html#9639" class="Bound">fl</a><a id="9730" class="Symbol">))</a>
      <a id="9739" class="Symbol">(</a><a id="9740" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">Eq.sym</a> <a id="9747" class="Symbol">(</a><a id="9748" href="Calf.Step.html#1579" class="Function">step/ext</a> <a id="9757" class="Symbol">(</a><a id="9758" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="9764" class="Symbol">(</a><a id="9765" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="9767" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="9771" class="Symbol">))</a> <a id="9774" class="Symbol">(</a><a id="9775" href="Examples.Amortized.html#4010" class="Function">batched-queue</a> <a id="9789" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="9792" href="Examples.Amortized.html#9639" class="Bound">fl</a><a id="9794" class="Symbol">)</a> <a id="9796" class="Symbol">(</a><a id="9797" href="Examples.Amortized.html#3927" class="Function">Φ</a> <a id="9799" href="Examples.Amortized.html#9624" class="Bound">bl</a> <a id="9802" href="Examples.Amortized.html#9639" class="Bound">fl</a><a id="9804" class="Symbol">)</a> <a id="9806" href="Examples.Amortized.html#9630" class="Bound">u</a><a id="9807" class="Symbol">))</a>
      <a id="9816" class="Symbol">(</a><a id="9817" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="9845" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="9848" href="Examples.Amortized.html#9639" class="Bound">fl</a> <a id="9851" href="Examples.Amortized.html#9630" class="Bound">u</a><a id="9852" class="Symbol">)</a>
  <a id="9856" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="9868" class="Symbol">(</a><a id="9869" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="9897" href="Examples.Amortized.html#9897" class="Bound">bl</a> <a id="9900" class="Symbol">(</a><a id="9901" href="Examples.Amortized.html#9901" class="Bound">e</a> <a id="9903" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9905" href="Examples.Amortized.html#9905" class="Bound">fl</a><a id="9907" class="Symbol">)</a> <a id="9909" href="Examples.Amortized.html#9909" class="Bound">u</a><a id="9910" class="Symbol">)</a> <a id="9912" class="Symbol">=</a>
    <a id="9918" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="9923" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9925" href="Examples.Amortized.html#8482" class="Function">◯[list-queue≈batched-queue]</a> <a id="9953" href="Examples.Amortized.html#9897" class="Bound">bl</a> <a id="9956" href="Examples.Amortized.html#9905" class="Bound">fl</a> <a id="9959" href="Examples.Amortized.html#9909" class="Bound">u</a>


  <a id="9965" class="Keyword">postulate</a>
    <a id="Queue.queue-program"></a><a id="9979" href="Examples.Amortized.html#9979" class="Postulate">queue-program</a> <a id="9993" class="Symbol">:</a> <a id="9995" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="9998" href="Calf.Metalanguage.html#267" class="Function">pos</a> <a id="10002" class="Symbol">→</a> <a id="10004" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="10007" href="Calf.Metalanguage.html#267" class="Function">pos</a>
  <a id="10013" class="Keyword">data</a> <a id="Queue.QueueProgram"></a><a id="10018" href="Examples.Amortized.html#10018" class="Datatype">QueueProgram</a> <a id="10031" class="Symbol">(</a><a id="10032" href="Examples.Amortized.html#10032" class="Bound">A</a> <a id="10034" class="Symbol">:</a> <a id="10036" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="10039" href="Calf.Metalanguage.html#267" class="Function">pos</a><a id="10042" class="Symbol">)</a> <a id="10044" class="Symbol">:</a> <a id="10046" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="10050" class="Keyword">where</a>
    <a id="Queue.QueueProgram.return"></a><a id="10060" href="Examples.Amortized.html#10060" class="InductiveConstructor">return</a>  <a id="10068" class="Symbol">:</a> <a id="10070" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="10074" href="Examples.Amortized.html#10032" class="Bound">A</a> <a id="10076" class="Symbol">→</a> <a id="10078" href="Examples.Amortized.html#10018" class="Datatype">QueueProgram</a> <a id="10091" href="Examples.Amortized.html#10032" class="Bound">A</a>
    <a id="Queue.QueueProgram.enqueue"></a><a id="10097" href="Examples.Amortized.html#10097" class="InductiveConstructor">enqueue</a> <a id="10105" class="Symbol">:</a> <a id="10107" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="10111" href="Examples.Amortized.html#2518" class="Function">E</a> <a id="10113" class="Symbol">→</a> <a id="10115" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="10119" class="Symbol">(</a><a id="10120" href="Examples.Amortized.html#9979" class="Postulate">queue-program</a> <a id="10134" href="Examples.Amortized.html#10032" class="Bound">A</a><a id="10135" class="Symbol">)</a> <a id="10137" class="Symbol">→</a> <a id="10139" href="Examples.Amortized.html#10018" class="Datatype">QueueProgram</a> <a id="10152" href="Examples.Amortized.html#10032" class="Bound">A</a>
    <a id="Queue.QueueProgram.dequeue"></a><a id="10158" href="Examples.Amortized.html#10158" class="InductiveConstructor">dequeue</a> <a id="10166" class="Symbol">:</a> <a id="10168" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="10172" class="Symbol">(</a><a id="10173" href="Calf.Metalanguage.html#352" class="Function">U</a> <a id="10175" class="Symbol">(</a><a id="10176" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="10178" class="Symbol">(</a><a id="10179" href="Calf.Types.Maybe.html#196" class="Function">maybe</a> <a id="10185" href="Examples.Amortized.html#2518" class="Function">E</a><a id="10186" class="Symbol">)</a> <a id="10188" class="Symbol">λ</a> <a id="10190" href="Examples.Amortized.html#10190" class="Bound">_</a> <a id="10192" class="Symbol">→</a> <a id="10194" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="10196" class="Symbol">(</a><a id="10197" href="Examples.Amortized.html#9979" class="Postulate">queue-program</a> <a id="10211" href="Examples.Amortized.html#10032" class="Bound">A</a><a id="10212" class="Symbol">)))</a> <a id="10216" class="Symbol">→</a> <a id="10218" href="Examples.Amortized.html#10018" class="Datatype">QueueProgram</a> <a id="10231" href="Examples.Amortized.html#10032" class="Bound">A</a>
  <a id="10235" class="Keyword">postulate</a>
    <a id="Queue.queue-program/decode"></a><a id="10249" href="Examples.Amortized.html#10249" class="Postulate">queue-program/decode</a> <a id="10270" class="Symbol">:</a> <a id="10272" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="10276" class="Symbol">(</a><a id="10277" href="Examples.Amortized.html#9979" class="Postulate">queue-program</a> <a id="10291" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="10292" class="Symbol">)</a> <a id="10294" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="10296" href="Examples.Amortized.html#10018" class="Datatype">QueueProgram</a> <a id="10309" href="Examples.Amortized.html#818" class="Generalizable">A</a>
    <a id="10315" class="Symbol">{-#</a> <a id="10319" class="Keyword">REWRITE</a> <a id="10327" href="Examples.Amortized.html#10249" class="Postulate">queue-program/decode</a> <a id="10348" class="Symbol">#-}</a>

  <a id="10355" class="Symbol">{-#</a> <a id="10359" class="Keyword">TERMINATING</a> <a id="10371" class="Symbol">#-}</a>
  <a id="Queue.ψ"></a><a id="10377" href="Examples.Amortized.html#10377" class="Function">ψ</a> <a id="10379" class="Symbol">:</a> <a id="10381" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="10385" class="Symbol">(</a><a id="10386" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="10388" class="Symbol">(</a><a id="10389" href="Examples.Amortized.html#9979" class="Postulate">queue-program</a> <a id="10403" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="10404" class="Symbol">)</a> <a id="10406" class="Symbol">λ</a> <a id="10408" href="Examples.Amortized.html#10408" class="Symbol">_</a> <a id="10410" class="Symbol">→</a> <a id="10412" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="10414" class="Symbol">(</a><a id="10415" href="Calf.Metalanguage.html#352" class="Function">U</a> <a id="10417" class="Symbol">(</a><a id="10418" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="10424" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="10425" class="Symbol">))</a> <a id="10428" class="Symbol">λ</a> <a id="10430" href="Examples.Amortized.html#10430" class="Symbol">_</a> <a id="10432" class="Symbol">→</a> <a id="10434" href="Examples.Amortized.html#818" class="Generalizable">A</a> <a id="10436" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="10438" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="10439" class="Symbol">)</a>
  <a id="10443" href="Examples.Amortized.html#10377" class="Function">ψ</a> <a id="10445" class="Symbol">{</a><a id="10446" href="Examples.Amortized.html#10446" class="Bound">A</a><a id="10447" class="Symbol">}</a> <a id="10449" class="Symbol">{</a><a id="10450" href="Examples.Amortized.html#10450" class="Bound">X</a><a id="10451" class="Symbol">}</a> <a id="10453" class="Symbol">(</a><a id="10454" href="Examples.Amortized.html#10060" class="InductiveConstructor">return</a> <a id="10461" href="Examples.Amortized.html#10461" class="Bound">a</a>   <a id="10465" class="Symbol">)</a> <a id="10467" href="Examples.Amortized.html#10467" class="Bound">q</a> <a id="10469" class="Symbol">=</a> <a id="10471" href="Examples.Amortized.html#10461" class="Bound">a</a> <a id="10473" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10475" href="Examples.Amortized.html#2652" class="Field">Queue.quit</a> <a id="10486" href="Examples.Amortized.html#10467" class="Bound">q</a>
  <a id="10490" href="Examples.Amortized.html#10377" class="Function">ψ</a> <a id="10492" class="Symbol">{</a><a id="10493" href="Examples.Amortized.html#10493" class="Bound">A</a><a id="10494" class="Symbol">}</a> <a id="10496" class="Symbol">{</a><a id="10497" href="Examples.Amortized.html#10497" class="Bound">X</a><a id="10498" class="Symbol">}</a> <a id="10500" class="Symbol">(</a><a id="10501" href="Examples.Amortized.html#10097" class="InductiveConstructor">enqueue</a> <a id="10509" href="Examples.Amortized.html#10509" class="Bound">e</a> <a id="10511" href="Examples.Amortized.html#10511" class="Bound">p</a><a id="10512" class="Symbol">)</a> <a id="10514" href="Examples.Amortized.html#10514" class="Bound">q</a> <a id="10516" class="Symbol">=</a> <a id="10518" href="Examples.Amortized.html#10377" class="Function">ψ</a> <a id="10520" href="Examples.Amortized.html#10511" class="Bound">p</a> <a id="10522" class="Symbol">(</a><a id="10523" href="Examples.Amortized.html#2674" class="Field">Queue.enqueue</a> <a id="10537" href="Examples.Amortized.html#10514" class="Bound">q</a> <a id="10539" href="Examples.Amortized.html#10509" class="Bound">e</a><a id="10540" class="Symbol">)</a>
  <a id="10544" href="Examples.Amortized.html#10377" class="Function">ψ</a> <a id="10546" class="Symbol">{</a><a id="10547" href="Examples.Amortized.html#10547" class="Bound">A</a><a id="10548" class="Symbol">}</a> <a id="10550" class="Symbol">{</a><a id="10551" href="Examples.Amortized.html#10551" class="Bound">X</a><a id="10552" class="Symbol">}</a> <a id="10554" class="Symbol">(</a><a id="10555" href="Examples.Amortized.html#10158" class="InductiveConstructor">dequeue</a> <a id="10563" href="Examples.Amortized.html#10563" class="Bound">k</a>  <a id="10566" class="Symbol">)</a> <a id="10568" href="Examples.Amortized.html#10568" class="Bound">q</a> <a id="10570" class="Symbol">=</a>
    <a id="10576" href="Calf.Metalanguage.html#1111" class="Function">bind</a> <a id="10581" class="Symbol">(</a><a id="10582" href="Examples.Amortized.html#10547" class="Bound">A</a> <a id="10584" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="10586" href="Examples.Amortized.html#10551" class="Bound">X</a><a id="10587" class="Symbol">)</a> <a id="10589" class="Symbol">(</a><a id="10590" href="Examples.Amortized.html#10563" class="Bound">k</a> <a id="10592" class="Symbol">(</a><a id="10593" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="10599" class="Symbol">(</a><a id="10600" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="10614" href="Examples.Amortized.html#10568" class="Bound">q</a><a id="10615" class="Symbol">)))</a> <a id="10619" class="Symbol">λ</a> <a id="10621" href="Examples.Amortized.html#10621" class="Bound">p</a> <a id="10623" class="Symbol">→</a>
    <a id="10629" href="Examples.Amortized.html#10377" class="Function">ψ</a> <a id="10631" href="Examples.Amortized.html#10621" class="Bound">p</a> <a id="10633" class="Symbol">(</a><a id="10634" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="10640" class="Symbol">(</a><a id="10641" href="Examples.Amortized.html#2714" class="Field">Queue.dequeue</a> <a id="10655" href="Examples.Amortized.html#10568" class="Bound">q</a><a id="10656" class="Symbol">))</a>

  <a id="Queue._≈&#39;_"></a><a id="10662" href="Examples.Amortized.html#10662" class="Function Operator">_≈&#39;_</a> <a id="10667" class="Symbol">:</a> <a id="10669" class="Symbol">(</a><a id="10670" href="Examples.Amortized.html#10670" class="Bound">q₁</a> <a id="10673" href="Examples.Amortized.html#10673" class="Bound">q₂</a> <a id="10676" class="Symbol">:</a> <a id="10678" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="10682" class="Symbol">(</a><a id="10683" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="10689" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="10690" class="Symbol">))</a> <a id="10693" class="Symbol">→</a> <a id="10695" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="10701" href="Examples.Amortized.html#10701" class="Bound">q₁</a> <a id="10704" href="Examples.Amortized.html#10662" class="Function Operator">≈&#39;</a> <a id="10707" href="Examples.Amortized.html#10707" class="Bound">q₂</a> <a id="10710" class="Symbol">=</a> <a id="10712" class="Symbol">(</a><a id="10713" href="Examples.Amortized.html#10713" class="Bound">A</a> <a id="10715" class="Symbol">:</a> <a id="10717" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="10720" href="Calf.Metalanguage.html#267" class="Function">pos</a><a id="10723" class="Symbol">)</a> <a id="10725" class="Symbol">→</a> <a id="10727" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="10731" class="Symbol">(</a><a id="10732" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="10734" class="Symbol">(</a><a id="10735" href="Examples.Amortized.html#9979" class="Postulate">queue-program</a> <a id="10749" href="Examples.Amortized.html#10713" class="Bound">A</a><a id="10750" class="Symbol">)</a> <a id="10752" class="Symbol">λ</a> <a id="10754" href="Examples.Amortized.html#10754" class="Bound">p</a> <a id="10756" class="Symbol">→</a> <a id="10758" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="10763" class="Symbol">(</a><a id="10764" href="Examples.Amortized.html#10377" class="Function">ψ</a> <a id="10766" href="Examples.Amortized.html#10754" class="Bound">p</a> <a id="10768" href="Examples.Amortized.html#10701" class="Bound">q₁</a> <a id="10771" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="10773" href="Examples.Amortized.html#10377" class="Function">ψ</a> <a id="10775" href="Examples.Amortized.html#10754" class="Bound">p</a> <a id="10777" href="Examples.Amortized.html#10707" class="Bound">q₂</a><a id="10779" class="Symbol">))</a>

  <a id="10785" class="Keyword">infix</a> <a id="10791" class="Number">3</a> <a id="10793" href="Examples.Amortized.html#10803" class="Function Operator">_⇒_</a> <a id="10797" href="Examples.Amortized.html#10807" class="Function Operator">_⇔_</a>
  <a id="Queue._⇒_"></a><a id="10803" href="Examples.Amortized.html#10803" class="Function Operator">_⇒_</a> <a id="Queue._⇔_"></a><a id="10807" href="Examples.Amortized.html#10807" class="Function Operator">_⇔_</a> <a id="10811" class="Symbol">:</a> <a id="10813" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="10816" href="Calf.Metalanguage.html#280" class="Function">neg</a> <a id="10820" class="Symbol">→</a> <a id="10822" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="10825" href="Calf.Metalanguage.html#280" class="Function">neg</a> <a id="10829" class="Symbol">→</a> <a id="10831" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="10834" href="Calf.Metalanguage.html#280" class="Function">neg</a>
  <a id="10840" href="Examples.Amortized.html#10840" class="Bound">X</a> <a id="10842" href="Examples.Amortized.html#10803" class="Function Operator">⇒</a> <a id="10844" href="Examples.Amortized.html#10844" class="Bound">Y</a> <a id="10846" class="Symbol">=</a> <a id="10848" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="10850" class="Symbol">(</a><a id="10851" href="Calf.Metalanguage.html#352" class="Function">U</a> <a id="10853" href="Examples.Amortized.html#10840" class="Bound">X</a><a id="10854" class="Symbol">)</a> <a id="10856" class="Symbol">λ</a> <a id="10858" href="Examples.Amortized.html#10858" class="Bound">_</a> <a id="10860" class="Symbol">→</a> <a id="10862" href="Examples.Amortized.html#10844" class="Bound">Y</a>
  <a id="10866" href="Examples.Amortized.html#10866" class="Bound">X</a> <a id="10868" href="Examples.Amortized.html#10807" class="Function Operator">⇔</a> <a id="10870" href="Examples.Amortized.html#10870" class="Bound">Y</a> <a id="10872" class="Symbol">=</a> <a id="10874" href="Calf.Types.Product.html#421" class="Postulate">prod⁻</a> <a id="10880" class="Symbol">(</a><a id="10881" href="Examples.Amortized.html#10866" class="Bound">X</a> <a id="10883" href="Examples.Amortized.html#10803" class="Function Operator">⇒</a> <a id="10885" href="Examples.Amortized.html#10870" class="Bound">Y</a><a id="10886" class="Symbol">)</a> <a id="10888" class="Symbol">(</a><a id="10889" href="Examples.Amortized.html#10870" class="Bound">Y</a> <a id="10891" href="Examples.Amortized.html#10803" class="Function Operator">⇒</a> <a id="10893" href="Examples.Amortized.html#10866" class="Bound">X</a><a id="10894" class="Symbol">)</a>

  <a id="10899" class="Symbol">{-#</a> <a id="10903" class="Keyword">TERMINATING</a> <a id="10915" class="Symbol">#-}</a>
  <a id="Queue.classic-amortization"></a><a id="10921" href="Examples.Amortized.html#10921" class="Function">classic-amortization</a> <a id="10942" class="Symbol">:</a> <a id="10944" class="Symbol">{</a><a id="10945" href="Examples.Amortized.html#10945" class="Bound">q₁</a> <a id="10948" href="Examples.Amortized.html#10948" class="Bound">q₂</a> <a id="10951" class="Symbol">:</a> <a id="10953" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="10957" class="Symbol">(</a><a id="10958" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="10964" href="Examples.Amortized.html#835" class="Generalizable">X</a><a id="10965" class="Symbol">)}</a> <a id="10968" class="Symbol">→</a> <a id="10970" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="10974" class="Symbol">(</a><a id="10975" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="10980" class="Symbol">(</a><a id="10981" href="Examples.Amortized.html#10945" class="Bound">q₁</a> <a id="10984" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="10986" href="Examples.Amortized.html#10948" class="Bound">q₂</a><a id="10988" class="Symbol">)</a> <a id="10990" href="Examples.Amortized.html#10807" class="Function Operator">⇔</a> <a id="10992" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="10997" class="Symbol">(</a><a id="10998" href="Examples.Amortized.html#10945" class="Bound">q₁</a> <a id="11001" href="Examples.Amortized.html#10662" class="Function Operator">≈&#39;</a> <a id="11004" href="Examples.Amortized.html#10948" class="Bound">q₂</a><a id="11006" class="Symbol">))</a>
  <a id="11011" href="Examples.Amortized.html#10921" class="Function">classic-amortization</a> <a id="11032" class="Symbol">{</a><a id="11033" href="Examples.Amortized.html#11033" class="Bound">X</a><a id="11034" class="Symbol">}</a> <a id="11036" class="Symbol">=</a> <a id="11038" href="Examples.Amortized.html#11073" class="Function">forward</a> <a id="11046" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11048" href="Examples.Amortized.html#11446" class="Function">backward</a>
    <a id="11061" class="Keyword">where</a>
      <a id="11073" href="Examples.Amortized.html#11073" class="Function">forward</a> <a id="11081" class="Symbol">:</a> <a id="11083" class="Symbol">{</a><a id="11084" href="Examples.Amortized.html#11084" class="Bound">q₁</a> <a id="11087" href="Examples.Amortized.html#11087" class="Bound">q₂</a> <a id="11090" class="Symbol">:</a> <a id="11092" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="11096" class="Symbol">(</a><a id="11097" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="11103" href="Examples.Amortized.html#11033" class="Bound">X</a><a id="11104" class="Symbol">)}</a> <a id="11107" class="Symbol">→</a> <a id="11109" href="Examples.Amortized.html#11084" class="Bound">q₁</a> <a id="11112" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="11114" href="Examples.Amortized.html#11087" class="Bound">q₂</a> <a id="11117" class="Symbol">→</a> <a id="11119" href="Examples.Amortized.html#11084" class="Bound">q₁</a> <a id="11122" href="Examples.Amortized.html#10662" class="Function Operator">≈&#39;</a> <a id="11125" href="Examples.Amortized.html#11087" class="Bound">q₂</a>
      <a id="11134" href="Examples.Amortized.html#11073" class="Function">forward</a> <a id="11142" href="Examples.Amortized.html#11142" class="Bound">h</a> <a id="11144" href="Examples.Amortized.html#11144" class="Bound">A</a> <a id="11146" class="Symbol">(</a><a id="11147" href="Examples.Amortized.html#10060" class="InductiveConstructor">return</a> <a id="11154" href="Examples.Amortized.html#11154" class="Bound">a</a>   <a id="11158" class="Symbol">)</a> <a id="11160" class="Symbol">=</a> <a id="11162" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="11170" class="Symbol">(</a><a id="11171" href="Examples.Amortized.html#11154" class="Bound">a</a> <a id="11173" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,_</a><a id="11175" class="Symbol">)</a> <a id="11177" class="Symbol">(</a><a id="11178" href="Examples.Amortized.html#5066" class="Field">_≈_.quit</a> <a id="11187" href="Examples.Amortized.html#11142" class="Bound">h</a><a id="11188" class="Symbol">)</a>
      <a id="11196" href="Examples.Amortized.html#11073" class="Function">forward</a> <a id="11204" href="Examples.Amortized.html#11204" class="Bound">h</a> <a id="11206" href="Examples.Amortized.html#11206" class="Bound">A</a> <a id="11208" class="Symbol">(</a><a id="11209" href="Examples.Amortized.html#10097" class="InductiveConstructor">enqueue</a> <a id="11217" href="Examples.Amortized.html#11217" class="Bound">e</a> <a id="11219" href="Examples.Amortized.html#11219" class="Bound">p</a><a id="11220" class="Symbol">)</a> <a id="11222" class="Symbol">=</a> <a id="11224" href="Examples.Amortized.html#11073" class="Function">forward</a> <a id="11232" class="Symbol">(</a><a id="11233" href="Examples.Amortized.html#5133" class="Field">_≈_.enqueue</a> <a id="11245" href="Examples.Amortized.html#11204" class="Bound">h</a> <a id="11247" href="Examples.Amortized.html#11217" class="Bound">e</a><a id="11248" class="Symbol">)</a> <a id="11250" href="Examples.Amortized.html#11206" class="Bound">A</a> <a id="11252" href="Examples.Amortized.html#11219" class="Bound">p</a>
      <a id="11260" href="Examples.Amortized.html#11073" class="Function">forward</a> <a id="11268" href="Examples.Amortized.html#11268" class="Bound">h</a> <a id="11270" href="Examples.Amortized.html#11270" class="Bound">A</a> <a id="11272" class="Symbol">(</a><a id="11273" href="Examples.Amortized.html#10158" class="InductiveConstructor">dequeue</a> <a id="11281" href="Examples.Amortized.html#11281" class="Bound">k</a>  <a id="11284" class="Symbol">)</a> <a id="11286" class="Symbol">=</a>
        <a id="11296" href="Relation.Binary.PropositionalEquality.Core.html#1367" class="Function">Eq.cong₂</a>
          <a id="11315" class="Symbol">(λ</a> <a id="11318" href="Examples.Amortized.html#11318" class="Bound">e₁</a> <a id="11321" href="Examples.Amortized.html#11321" class="Bound">e₂</a> <a id="11324" class="Symbol">→</a> <a id="11326" href="Calf.Metalanguage.html#1111" class="Function">bind</a> <a id="11331" class="Symbol">(</a><a id="11332" href="Examples.Amortized.html#11270" class="Bound">A</a> <a id="11334" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="11336" href="Examples.Amortized.html#11033" class="Bound">X</a><a id="11337" class="Symbol">)</a> <a id="11339" class="Symbol">(</a><a id="11340" href="Examples.Amortized.html#11281" class="Bound">k</a> <a id="11342" href="Examples.Amortized.html#11318" class="Bound">e₁</a><a id="11344" class="Symbol">)</a> <a id="11346" href="Examples.Amortized.html#11321" class="Bound">e₂</a><a id="11348" class="Symbol">)</a>
          <a id="11360" class="Symbol">(</a><a id="11361" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="11367" class="Symbol">(</a><a id="11368" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="11380" href="Examples.Amortized.html#11268" class="Bound">h</a><a id="11381" class="Symbol">))</a>
          <a id="11394" class="Symbol">(</a><a id="11395" href="Calf.Prelude.html#190" class="Function">funext</a> <a id="11402" class="Symbol">(</a><a id="11403" href="Examples.Amortized.html#11073" class="Function">forward</a> <a id="11411" class="Symbol">(</a><a id="11412" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="11418" class="Symbol">(</a><a id="11419" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="11431" href="Examples.Amortized.html#11268" class="Bound">h</a><a id="11432" class="Symbol">))</a> <a id="11435" href="Examples.Amortized.html#11270" class="Bound">A</a><a id="11436" class="Symbol">))</a>

      <a id="11446" href="Examples.Amortized.html#11446" class="Function">backward</a> <a id="11455" class="Symbol">:</a> <a id="11457" class="Symbol">{</a><a id="11458" href="Examples.Amortized.html#11458" class="Bound">q₁</a> <a id="11461" href="Examples.Amortized.html#11461" class="Bound">q₂</a> <a id="11464" class="Symbol">:</a> <a id="11466" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="11470" class="Symbol">(</a><a id="11471" href="Examples.Amortized.html#2556" class="Postulate">queue</a> <a id="11477" href="Examples.Amortized.html#11033" class="Bound">X</a><a id="11478" class="Symbol">)}</a> <a id="11481" class="Symbol">→</a> <a id="11483" href="Examples.Amortized.html#11458" class="Bound">q₁</a> <a id="11486" href="Examples.Amortized.html#10662" class="Function Operator">≈&#39;</a> <a id="11489" href="Examples.Amortized.html#11461" class="Bound">q₂</a> <a id="11492" class="Symbol">→</a> <a id="11494" href="Examples.Amortized.html#11458" class="Bound">q₁</a> <a id="11497" href="Examples.Amortized.html#4994" class="Record Operator">≈</a> <a id="11499" href="Examples.Amortized.html#11461" class="Bound">q₂</a>
      <a id="11508" href="Examples.Amortized.html#5066" class="Field">_≈_.quit</a> <a id="11517" class="Symbol">(</a><a id="11518" href="Examples.Amortized.html#11446" class="Function">backward</a> <a id="11527" href="Examples.Amortized.html#11527" class="Bound">classic</a><a id="11534" class="Symbol">)</a> <a id="11536" class="Symbol">=</a> <a id="11538" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="11546" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="11552" class="Symbol">(</a><a id="11553" href="Examples.Amortized.html#11527" class="Bound">classic</a> <a id="11561" href="Calf.Types.Unit.html#198" class="Function">unit</a> <a id="11566" class="Symbol">(</a><a id="11567" href="Examples.Amortized.html#10060" class="InductiveConstructor">return</a> <a id="11574" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a><a id="11578" class="Symbol">))</a>
      <a id="11587" href="Examples.Amortized.html#5133" class="Field">_≈_.enqueue</a> <a id="11599" class="Symbol">(</a><a id="11600" href="Examples.Amortized.html#11446" class="Function">backward</a> <a id="11609" href="Examples.Amortized.html#11609" class="Bound">classic</a><a id="11616" class="Symbol">)</a> <a id="11618" href="Examples.Amortized.html#11618" class="Bound">e</a> <a id="11620" class="Symbol">=</a> <a id="11622" href="Examples.Amortized.html#11446" class="Function">backward</a> <a id="11631" class="Symbol">λ</a> <a id="11633" href="Examples.Amortized.html#11633" class="Bound">A</a> <a id="11635" href="Examples.Amortized.html#11635" class="Bound">p</a> <a id="11637" class="Symbol">→</a> <a id="11639" href="Examples.Amortized.html#11609" class="Bound">classic</a> <a id="11647" href="Examples.Amortized.html#11633" class="Bound">A</a> <a id="11649" class="Symbol">(</a><a id="11650" href="Examples.Amortized.html#10097" class="InductiveConstructor">enqueue</a> <a id="11658" href="Examples.Amortized.html#11618" class="Bound">e</a> <a id="11660" href="Examples.Amortized.html#11635" class="Bound">p</a><a id="11661" class="Symbol">)</a>
      <a id="11669" href="Examples.Amortized.html#5220" class="Field">_≈_.dequeue</a> <a id="11681" class="Symbol">(</a><a id="11682" href="Examples.Amortized.html#11446" class="Function">backward</a> <a id="11691" href="Examples.Amortized.html#11691" class="Bound">classic</a><a id="11698" class="Symbol">)</a> <a id="11700" class="Symbol">=</a>
        <a id="11710" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="11718" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="11724" class="Symbol">(</a><a id="11725" href="Examples.Amortized.html#11691" class="Bound">classic</a> <a id="11733" class="Symbol">(</a><a id="11734" href="Calf.Types.Maybe.html#196" class="Function">maybe</a> <a id="11740" href="Examples.Amortized.html#2518" class="Function">E</a><a id="11741" class="Symbol">)</a> <a id="11743" class="Symbol">(</a><a id="11744" href="Examples.Amortized.html#10158" class="InductiveConstructor">dequeue</a> <a id="11752" class="Symbol">λ</a> <a id="11754" href="Examples.Amortized.html#11754" class="Bound">e</a> <a id="11756" class="Symbol">→</a> <a id="11758" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="11762" class="Symbol">(</a><a id="11763" href="Examples.Amortized.html#10060" class="InductiveConstructor">return</a> <a id="11770" href="Examples.Amortized.html#11754" class="Bound">e</a><a id="11771" class="Symbol">)))</a> <a id="11775" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a>
        <a id="11785" href="Examples.Amortized.html#11446" class="Function">backward</a> <a id="11794" class="Symbol">λ</a> <a id="11796" href="Examples.Amortized.html#11796" class="Bound">A</a> <a id="11798" href="Examples.Amortized.html#11798" class="Bound">p</a> <a id="11800" class="Symbol">→</a> <a id="11802" href="Examples.Amortized.html#11691" class="Bound">classic</a> <a id="11810" href="Examples.Amortized.html#11796" class="Bound">A</a> <a id="11812" class="Symbol">(</a><a id="11813" href="Examples.Amortized.html#10158" class="InductiveConstructor">dequeue</a> <a id="11821" class="Symbol">λ</a> <a id="11823" href="Examples.Amortized.html#11823" class="Bound">_</a> <a id="11825" class="Symbol">→</a> <a id="11827" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="11831" href="Examples.Amortized.html#11798" class="Bound">p</a><a id="11832" class="Symbol">)</a>


<a id="11836" class="Keyword">module</a> <a id="DynamicArray"></a><a id="11843" href="Examples.Amortized.html#11843" class="Module">DynamicArray</a> <a id="11856" class="Keyword">where</a>
  <a id="11864" class="Keyword">postulate</a>
    <a id="DynamicArray.dynamic-array"></a><a id="11878" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="11892" class="Symbol">:</a> <a id="11894" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="11897" href="Calf.Metalanguage.html#267" class="Function">pos</a> <a id="11901" class="Symbol">→</a> <a id="11903" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="11906" href="Calf.Metalanguage.html#280" class="Function">neg</a>
  <a id="11912" class="Keyword">record</a> <a id="DynamicArray.DynamicArray"></a><a id="11919" href="Examples.Amortized.html#11919" class="Record">DynamicArray</a> <a id="11932" class="Symbol">(</a><a id="11933" href="Examples.Amortized.html#11933" class="Bound">A</a> <a id="11935" class="Symbol">:</a> <a id="11937" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="11940" href="Calf.Metalanguage.html#267" class="Function">pos</a><a id="11943" class="Symbol">)</a> <a id="11945" class="Symbol">:</a> <a id="11947" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11951" class="Keyword">where</a>
    <a id="11961" class="Keyword">coinductive</a>
    <a id="11977" class="Keyword">field</a>
      <a id="DynamicArray.DynamicArray.quit"></a><a id="11989" href="Examples.Amortized.html#11989" class="Field">quit</a>   <a id="11996" class="Symbol">:</a> <a id="11998" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="12002" class="Symbol">(</a><a id="12003" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="12005" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="12009" class="Symbol">)</a>
      <a id="DynamicArray.DynamicArray.append"></a><a id="12017" href="Examples.Amortized.html#12017" class="Field">append</a> <a id="12024" class="Symbol">:</a> <a id="12026" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="12030" class="Symbol">(</a><a id="12031" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="12033" href="Examples.Amortized.html#11933" class="Bound">A</a> <a id="12035" class="Symbol">λ</a> <a id="12037" href="Examples.Amortized.html#12037" class="Bound">_</a> <a id="12039" class="Symbol">→</a> <a id="12041" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12055" href="Examples.Amortized.html#11933" class="Bound">A</a><a id="12056" class="Symbol">)</a>
      <a id="DynamicArray.DynamicArray.get"></a><a id="12064" href="Examples.Amortized.html#12064" class="Field">get</a>    <a id="12071" class="Symbol">:</a> <a id="12073" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="12077" class="Symbol">(</a><a id="12078" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="12080" href="Calf.Types.Nat.html#183" class="Function">nat</a> <a id="12084" class="Symbol">λ</a> <a id="12086" href="Examples.Amortized.html#12086" class="Bound">_</a> <a id="12088" class="Symbol">→</a> <a id="12090" href="Calf.Types.Maybe.html#196" class="Function">maybe</a> <a id="12096" href="Examples.Amortized.html#11933" class="Bound">A</a> <a id="12098" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="12100" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12114" href="Examples.Amortized.html#11933" class="Bound">A</a><a id="12115" class="Symbol">)</a>
  <a id="12119" class="Keyword">postulate</a>
    <a id="DynamicArray.dynamic-array/decode"></a><a id="12133" href="Examples.Amortized.html#12133" class="Postulate">dynamic-array/decode</a> <a id="12154" class="Symbol">:</a> <a id="12156" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="12160" class="Symbol">(</a><a id="12161" href="Calf.Metalanguage.html#352" class="Function">U</a> <a id="12163" class="Symbol">(</a><a id="12164" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12178" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="12179" class="Symbol">))</a> <a id="12182" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12184" href="Examples.Amortized.html#11919" class="Record">DynamicArray</a> <a id="12197" href="Examples.Amortized.html#818" class="Generalizable">A</a>
    <a id="12203" class="Symbol">{-#</a> <a id="12207" class="Keyword">REWRITE</a> <a id="12215" href="Examples.Amortized.html#12133" class="Postulate">dynamic-array/decode</a> <a id="12236" class="Symbol">#-}</a>

    <a id="DynamicArray.quit/step"></a><a id="12245" href="Examples.Amortized.html#12245" class="Postulate">quit/step</a>   <a id="12257" class="Symbol">:</a> <a id="12259" class="Symbol">∀</a> <a id="12261" class="Symbol">{</a><a id="12262" href="Examples.Amortized.html#12262" class="Bound">c</a> <a id="12264" href="Examples.Amortized.html#12264" class="Bound">e</a><a id="12265" class="Symbol">}</a> <a id="12267" class="Symbol">→</a> <a id="12269" href="Examples.Amortized.html#11989" class="Field">DynamicArray.quit</a>   <a id="12289" class="Symbol">(</a><a id="12290" href="Calf.Step.html#385" class="Function">step</a> <a id="12295" class="Symbol">(</a><a id="12296" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12310" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="12311" class="Symbol">)</a> <a id="12313" href="Examples.Amortized.html#12262" class="Bound">c</a> <a id="12315" href="Examples.Amortized.html#12264" class="Bound">e</a><a id="12316" class="Symbol">)</a> <a id="12318" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12320" href="Calf.Step.html#385" class="Function">step</a> <a id="12325" class="Symbol">(</a><a id="12326" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="12328" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="12332" class="Symbol">)</a>                                <a id="12365" href="Examples.Amortized.html#12262" class="Bound">c</a> <a id="12367" class="Symbol">(</a><a id="12368" href="Examples.Amortized.html#11989" class="Field">DynamicArray.quit</a>   <a id="12388" href="Examples.Amortized.html#12264" class="Bound">e</a><a id="12389" class="Symbol">)</a>
    <a id="DynamicArray.append/step"></a><a id="12395" href="Examples.Amortized.html#12395" class="Postulate">append/step</a> <a id="12407" class="Symbol">:</a> <a id="12409" class="Symbol">∀</a> <a id="12411" class="Symbol">{</a><a id="12412" href="Examples.Amortized.html#12412" class="Bound">c</a> <a id="12414" href="Examples.Amortized.html#12414" class="Bound">e</a><a id="12415" class="Symbol">}</a> <a id="12417" class="Symbol">→</a> <a id="12419" href="Examples.Amortized.html#12017" class="Field">DynamicArray.append</a> <a id="12439" class="Symbol">(</a><a id="12440" href="Calf.Step.html#385" class="Function">step</a> <a id="12445" class="Symbol">(</a><a id="12446" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12460" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="12461" class="Symbol">)</a> <a id="12463" href="Examples.Amortized.html#12412" class="Bound">c</a> <a id="12465" href="Examples.Amortized.html#12414" class="Bound">e</a><a id="12466" class="Symbol">)</a> <a id="12468" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12470" href="Calf.Step.html#385" class="Function">step</a> <a id="12475" class="Symbol">(</a><a id="12476" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="12478" href="Examples.Amortized.html#818" class="Generalizable">A</a> <a id="12480" class="Symbol">λ</a> <a id="12482" href="Examples.Amortized.html#12482" class="Bound">_</a> <a id="12484" class="Symbol">→</a> <a id="12486" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12500" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="12501" class="Symbol">)</a>             <a id="12515" href="Examples.Amortized.html#12412" class="Bound">c</a> <a id="12517" class="Symbol">(</a><a id="12518" href="Examples.Amortized.html#12017" class="Field">DynamicArray.append</a> <a id="12538" href="Examples.Amortized.html#12414" class="Bound">e</a><a id="12539" class="Symbol">)</a>
    <a id="DynamicArray.get/step"></a><a id="12545" href="Examples.Amortized.html#12545" class="Postulate">get/step</a>    <a id="12557" class="Symbol">:</a> <a id="12559" class="Symbol">∀</a> <a id="12561" class="Symbol">{</a><a id="12562" href="Examples.Amortized.html#12562" class="Bound">c</a> <a id="12564" href="Examples.Amortized.html#12564" class="Bound">e</a><a id="12565" class="Symbol">}</a> <a id="12567" class="Symbol">→</a> <a id="12569" href="Examples.Amortized.html#12064" class="Field">DynamicArray.get</a>    <a id="12589" class="Symbol">(</a><a id="12590" href="Calf.Step.html#385" class="Function">step</a> <a id="12595" class="Symbol">(</a><a id="12596" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12610" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="12611" class="Symbol">)</a> <a id="12613" href="Examples.Amortized.html#12562" class="Bound">c</a> <a id="12615" href="Examples.Amortized.html#12564" class="Bound">e</a><a id="12616" class="Symbol">)</a> <a id="12618" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12620" href="Calf.Step.html#385" class="Function">step</a> <a id="12625" class="Symbol">(</a><a id="12626" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="12628" href="Calf.Types.Nat.html#183" class="Function">nat</a> <a id="12632" class="Symbol">λ</a> <a id="12634" href="Examples.Amortized.html#12634" class="Bound">_</a> <a id="12636" class="Symbol">→</a> <a id="12638" href="Calf.Types.Maybe.html#196" class="Function">maybe</a> <a id="12644" href="Examples.Amortized.html#818" class="Generalizable">A</a> <a id="12646" href="Examples.Amortized.html#851" class="Function Operator">⋉</a> <a id="12648" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12662" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="12663" class="Symbol">)</a> <a id="12665" href="Examples.Amortized.html#12562" class="Bound">c</a> <a id="12667" class="Symbol">(</a><a id="12668" href="Examples.Amortized.html#12064" class="Field">DynamicArray.get</a>    <a id="12688" href="Examples.Amortized.html#12564" class="Bound">e</a><a id="12689" class="Symbol">)</a>
    <a id="12695" class="Symbol">{-#</a> <a id="12699" class="Keyword">REWRITE</a> <a id="12707" href="Examples.Amortized.html#12245" class="Postulate">quit/step</a> <a id="12717" href="Examples.Amortized.html#12395" class="Postulate">append/step</a> <a id="12729" href="Examples.Amortized.html#12545" class="Postulate">get/step</a> <a id="12738" class="Symbol">#-}</a>

  <a id="DynamicArray.Φ"></a><a id="12745" href="Examples.Amortized.html#12745" class="Function">Φ</a> <a id="12747" class="Symbol">:</a> <a id="12749" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="12753" href="Calf.Types.Nat.html#183" class="Function">nat</a> <a id="12757" class="Symbol">→</a> <a id="12759" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="12763" href="Calf.Types.Nat.html#183" class="Function">nat</a> <a id="12767" class="Symbol">→</a> <a id="12769" href="Calf.CostMonoid.html#3662" class="Function">ℂ</a>
  <a id="12773" href="Examples.Amortized.html#12745" class="Function">Φ</a> <a id="12775" href="Examples.Amortized.html#12775" class="Bound">n</a> <a id="12777" href="Examples.Amortized.html#12777" class="Bound">m</a> <a id="12779" class="Symbol">=</a> <a id="12781" class="Number">2</a> <a id="12783" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="12785" href="Examples.Amortized.html#12775" class="Bound">n</a> <a id="12787" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="12789" class="Number">2</a> <a id="12791" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="12793" href="Examples.Amortized.html#12777" class="Bound">m</a>

  <a id="12798" class="Symbol">{-#</a> <a id="12802" class="Keyword">TERMINATING</a> <a id="12814" class="Symbol">#-}</a>
  <a id="12820" class="Comment">-- array n m</a>
  <a id="12835" class="Comment">-- length of allocated array: (2 ^ n)</a>
  <a id="12875" class="Comment">-- remaining free spaces: m (≤ 2 ^ (pred n))</a>
  <a id="DynamicArray.array"></a><a id="12922" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="12928" class="Symbol">:</a> <a id="12930" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="12934" class="Symbol">(</a><a id="12935" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="12937" href="Calf.Types.Nat.html#183" class="Function">nat</a> <a id="12941" class="Symbol">λ</a> <a id="12943" href="Examples.Amortized.html#12943" class="Symbol">_</a> <a id="12945" class="Symbol">→</a> <a id="12947" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="12949" href="Calf.Types.Nat.html#183" class="Function">nat</a> <a id="12953" class="Symbol">λ</a> <a id="12955" href="Examples.Amortized.html#12955" class="Symbol">_</a> <a id="12957" class="Symbol">→</a> <a id="12959" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="12973" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="12977" class="Symbol">)</a>
  <a id="12981" href="Examples.Amortized.html#11989" class="Field">DynamicArray.quit</a> <a id="12999" class="Symbol">(</a><a id="13000" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="13006" href="Examples.Amortized.html#13006" class="Bound">n</a> <a id="13008" href="Examples.Amortized.html#13008" class="Bound">m</a><a id="13009" class="Symbol">)</a> <a id="13011" class="Symbol">=</a> <a id="13013" href="Calf.Step.html#385" class="Function">step</a> <a id="13018" class="Symbol">(</a><a id="13019" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="13021" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="13025" class="Symbol">)</a> <a id="13027" class="Symbol">(</a><a id="13028" href="Examples.Amortized.html#12745" class="Function">Φ</a> <a id="13030" href="Examples.Amortized.html#13006" class="Bound">n</a> <a id="13032" href="Examples.Amortized.html#13008" class="Bound">m</a><a id="13033" class="Symbol">)</a> <a id="13035" class="Symbol">(</a><a id="13036" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="13040" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a><a id="13044" class="Symbol">)</a>
  <a id="13048" href="Examples.Amortized.html#12017" class="Field">DynamicArray.append</a> <a id="13068" class="Symbol">(</a><a id="13069" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="13075" href="Examples.Amortized.html#13075" class="Bound">n</a> <a id="13077" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="13081" class="Symbol">)</a> <a id="13083" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a> <a id="13088" class="Symbol">=</a> <a id="13090" href="Calf.Step.html#385" class="Function">step</a> <a id="13095" class="Symbol">(</a><a id="13096" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="13110" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="13114" class="Symbol">)</a> <a id="13116" class="Symbol">(</a><a id="13117" class="Number">2</a> <a id="13119" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="13121" href="Examples.Amortized.html#13075" class="Bound">n</a><a id="13122" class="Symbol">)</a> <a id="13124" class="Symbol">(</a><a id="13125" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="13131" class="Symbol">(</a><a id="13132" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="13136" href="Examples.Amortized.html#13075" class="Bound">n</a><a id="13137" class="Symbol">)</a> <a id="13139" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="13147" href="Examples.Amortized.html#13075" class="Bound">n</a> <a id="13149" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a><a id="13150" class="Symbol">)</a>
  <a id="13154" href="Examples.Amortized.html#12017" class="Field">DynamicArray.append</a> <a id="13174" class="Symbol">(</a><a id="13175" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="13181" href="Examples.Amortized.html#13181" class="Bound">n</a> <a id="13183" class="Symbol">(</a><a id="13184" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="13188" href="Examples.Amortized.html#13188" class="Bound">m</a><a id="13189" class="Symbol">))</a> <a id="13192" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a> <a id="13197" class="Symbol">=</a> <a id="13199" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="13205" href="Examples.Amortized.html#13181" class="Bound">n</a> <a id="13207" href="Examples.Amortized.html#13188" class="Bound">m</a>
  <a id="13211" href="Examples.Amortized.html#12064" class="Field">DynamicArray.get</a> <a id="13228" class="Symbol">(</a><a id="13229" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="13235" href="Examples.Amortized.html#13235" class="Bound">n</a> <a id="13237" href="Examples.Amortized.html#13237" class="Bound">m</a><a id="13238" class="Symbol">)</a> <a id="13240" href="Examples.Amortized.html#13240" class="Bound">i</a> <a id="13242" class="Keyword">with</a> <a id="13247" href="Examples.Amortized.html#13240" class="Bound">i</a> <a id="13249" href="Data.Nat.Properties.html#10078" class="Function Operator">Nat.&lt;?</a> <a id="13256" class="Number">2</a> <a id="13258" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="13260" href="Examples.Amortized.html#13235" class="Bound">n</a> <a id="13262" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="13264" href="Examples.Amortized.html#13237" class="Bound">m</a>
  <a id="13268" class="Symbol">...</a> <a id="13272" class="Symbol">|</a> <a id="13274" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="13277" href="Examples.Amortized.html#13277" class="Bound">¬p</a> <a id="13280" class="Symbol">=</a> <a id="13282" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="13290" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="13292" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="13298" class="Bound">n</a> <a id="13300" class="Bound">m</a>
  <a id="13304" class="Symbol">...</a> <a id="13308" class="Symbol">|</a> <a id="13310" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="13314" href="Examples.Amortized.html#13314" class="Bound">p</a> <a id="13316" class="Symbol">=</a> <a id="13318" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="13323" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a> <a id="13328" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="13330" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="13336" class="Bound">n</a> <a id="13338" class="Bound">m</a>

  <a id="13343" class="Symbol">{-#</a> <a id="13347" class="Keyword">TERMINATING</a> <a id="13359" class="Symbol">#-}</a>
  <a id="DynamicArray.SPEC/array"></a><a id="13365" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="13376" class="Symbol">:</a> <a id="13378" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="13382" class="Symbol">(</a><a id="13383" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="13385" href="Calf.Types.Nat.html#183" class="Function">nat</a> <a id="13389" class="Symbol">λ</a> <a id="13391" href="Examples.Amortized.html#13391" class="Symbol">_</a> <a id="13393" class="Symbol">→</a> <a id="13395" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="13409" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="13413" class="Symbol">)</a>
  <a id="13417" href="Examples.Amortized.html#11989" class="Field">DynamicArray.quit</a> <a id="13435" class="Symbol">(</a><a id="13436" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="13447" href="Examples.Amortized.html#13447" class="Bound">n</a><a id="13448" class="Symbol">)</a> <a id="13450" class="Symbol">=</a> <a id="13452" href="Calf.Metalanguage.html#573" class="Function">ret</a> <a id="13456" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a>
  <a id="13463" href="Examples.Amortized.html#12017" class="Field">DynamicArray.append</a> <a id="13483" class="Symbol">(</a><a id="13484" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="13495" href="Examples.Amortized.html#13495" class="Bound">n</a><a id="13496" class="Symbol">)</a> <a id="13498" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a> <a id="13503" class="Symbol">=</a> <a id="13505" href="Calf.Step.html#385" class="Function">step</a> <a id="13510" class="Symbol">(</a><a id="13511" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="13525" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="13529" class="Symbol">)</a> <a id="13531" class="Number">2</a> <a id="13533" class="Symbol">(</a><a id="13534" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="13545" class="Symbol">(</a><a id="13546" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="13550" href="Examples.Amortized.html#13495" class="Bound">n</a><a id="13551" class="Symbol">))</a>
  <a id="13556" href="Examples.Amortized.html#12064" class="Field">DynamicArray.get</a> <a id="13573" class="Symbol">(</a><a id="13574" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="13585" href="Examples.Amortized.html#13585" class="Bound">n</a><a id="13586" class="Symbol">)</a> <a id="13588" href="Examples.Amortized.html#13588" class="Bound">i</a> <a id="13590" class="Keyword">with</a> <a id="13595" href="Examples.Amortized.html#13588" class="Bound">i</a> <a id="13597" href="Data.Nat.Properties.html#10078" class="Function Operator">Nat.&lt;?</a> <a id="13604" href="Examples.Amortized.html#13585" class="Bound">n</a>
  <a id="13608" class="Symbol">...</a> <a id="13612" class="Symbol">|</a> <a id="13614" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="13617" href="Examples.Amortized.html#13617" class="Bound">¬p</a> <a id="13620" class="Symbol">=</a> <a id="13622" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="13630" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="13632" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="13643" class="Bound">n</a>
  <a id="13647" class="Symbol">...</a> <a id="13651" class="Symbol">|</a> <a id="13653" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="13657" href="Examples.Amortized.html#13657" class="Bound">p</a> <a id="13659" class="Symbol">=</a> <a id="13661" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="13666" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a> <a id="13671" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="13673" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="13684" class="Bound">n</a>

  <a id="13689" class="Keyword">record</a> <a id="DynamicArray._≈_"></a><a id="13696" href="Examples.Amortized.html#13696" class="Record Operator">_≈_</a> <a id="13700" class="Symbol">{</a><a id="13701" href="Examples.Amortized.html#13701" class="Bound">A</a> <a id="13703" class="Symbol">:</a> <a id="13705" href="Calf.Metalanguage.html#294" class="Function">tp</a> <a id="13708" href="Calf.Metalanguage.html#267" class="Function">pos</a><a id="13711" class="Symbol">}</a> <a id="13713" class="Symbol">(</a><a id="13714" href="Examples.Amortized.html#13714" class="Bound">d₁</a> <a id="13717" href="Examples.Amortized.html#13717" class="Bound">d₂</a> <a id="13720" class="Symbol">:</a> <a id="13722" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="13726" class="Symbol">(</a><a id="13727" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="13741" href="Examples.Amortized.html#13701" class="Bound">A</a><a id="13742" class="Symbol">))</a> <a id="13745" class="Symbol">:</a> <a id="13747" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="13751" class="Keyword">where</a>
    <a id="13761" class="Keyword">coinductive</a>
    <a id="13777" class="Keyword">field</a>
      <a id="DynamicArray._≈_.quit"></a><a id="13789" href="Examples.Amortized.html#13789" class="Field">quit</a>   <a id="13796" class="Symbol">:</a> <a id="13798" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="13802" href="Function.Base.html#1919" class="Function Operator">$</a>
        <a id="13812" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="13817" class="Symbol">(</a><a id="13818" href="Examples.Amortized.html#11989" class="Field">DynamicArray.quit</a> <a id="13836" href="Examples.Amortized.html#13714" class="Bound">d₁</a> <a id="13839" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13841" href="Examples.Amortized.html#11989" class="Field">DynamicArray.quit</a> <a id="13859" href="Examples.Amortized.html#13717" class="Bound">d₂</a><a id="13861" class="Symbol">)</a>
      <a id="DynamicArray._≈_.append"></a><a id="13869" href="Examples.Amortized.html#13869" class="Field">append</a> <a id="13876" class="Symbol">:</a> <a id="13878" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="13882" href="Function.Base.html#1919" class="Function Operator">$</a>
        <a id="13892" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="13894" href="Examples.Amortized.html#13701" class="Bound">A</a> <a id="13896" class="Symbol">λ</a> <a id="13898" href="Examples.Amortized.html#13898" class="Bound">a</a> <a id="13900" class="Symbol">→</a> <a id="13902" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="13907" class="Symbol">(</a><a id="13908" href="Examples.Amortized.html#12017" class="Field">DynamicArray.append</a> <a id="13928" href="Examples.Amortized.html#13714" class="Bound">d₁</a> <a id="13931" href="Examples.Amortized.html#13898" class="Bound">a</a> <a id="13933" href="Examples.Amortized.html#13696" class="Record Operator">≈</a> <a id="13935" href="Examples.Amortized.html#12017" class="Field">DynamicArray.append</a> <a id="13955" href="Examples.Amortized.html#13717" class="Bound">d₂</a> <a id="13958" href="Examples.Amortized.html#13898" class="Bound">a</a><a id="13959" class="Symbol">)</a>
      <a id="DynamicArray._≈_.get"></a><a id="13967" href="Examples.Amortized.html#13967" class="Field">get</a>    <a id="13974" class="Symbol">:</a> <a id="13976" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="13980" href="Function.Base.html#1919" class="Function Operator">$</a>
        <a id="13990" href="Calf.Metalanguage.html#1832" class="Function">Π</a> <a id="13992" href="Calf.Types.Nat.html#183" class="Function">nat</a> <a id="13996" class="Symbol">λ</a> <a id="13998" href="Examples.Amortized.html#13998" class="Bound">i</a> <a id="14000" class="Symbol">→</a>
          <a id="14012" class="Symbol">(</a><a id="14013" href="Calf.Metalanguage.html#352" class="Function">U</a> <a id="14015" class="Symbol">(</a><a id="14016" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="14021" class="Symbol">(</a><a id="14022" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="14028" class="Symbol">(</a><a id="14029" href="Examples.Amortized.html#12064" class="Field">DynamicArray.get</a> <a id="14046" href="Examples.Amortized.html#13714" class="Bound">d₁</a> <a id="14049" href="Examples.Amortized.html#13998" class="Bound">i</a><a id="14050" class="Symbol">)</a> <a id="14052" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="14054" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="14060" class="Symbol">(</a><a id="14061" href="Examples.Amortized.html#12064" class="Field">DynamicArray.get</a> <a id="14078" href="Examples.Amortized.html#13717" class="Bound">d₂</a> <a id="14081" href="Examples.Amortized.html#13998" class="Bound">i</a><a id="14082" class="Symbol">))))</a> <a id="14087" href="Examples.Amortized.html#851" class="Function Operator">⋉</a>
          <a id="14099" class="Symbol">(</a><a id="14100" href="Calf.Metalanguage.html#2410" class="Function">meta</a> <a id="14105" class="Symbol">(</a><a id="14106" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="14112" class="Symbol">(</a><a id="14113" href="Examples.Amortized.html#12064" class="Field">DynamicArray.get</a> <a id="14130" href="Examples.Amortized.html#13714" class="Bound">d₁</a> <a id="14133" href="Examples.Amortized.html#13998" class="Bound">i</a><a id="14134" class="Symbol">)</a> <a id="14136" href="Examples.Amortized.html#13696" class="Record Operator">≈</a> <a id="14138" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="14144" class="Symbol">(</a><a id="14145" href="Examples.Amortized.html#12064" class="Field">DynamicArray.get</a> <a id="14162" href="Examples.Amortized.html#13717" class="Bound">d₂</a> <a id="14165" href="Examples.Amortized.html#13998" class="Bound">i</a><a id="14166" class="Symbol">)))</a>

  <a id="DynamicArray.≈-cong"></a><a id="14173" href="Examples.Amortized.html#14173" class="Function">≈-cong</a> <a id="14180" class="Symbol">:</a> <a id="14182" class="Symbol">(</a><a id="14183" href="Examples.Amortized.html#14183" class="Bound">c</a> <a id="14185" class="Symbol">:</a> <a id="14187" href="Calf.Metalanguage.html#525" class="Function">cmp</a> <a id="14191" href="Calf.Step.html#344" class="Function">cost</a><a id="14195" class="Symbol">)</a> <a id="14197" class="Symbol">{</a><a id="14198" href="Examples.Amortized.html#14198" class="Bound">x</a> <a id="14200" href="Examples.Amortized.html#14200" class="Bound">y</a> <a id="14202" class="Symbol">:</a> <a id="14204" href="Examples.Amortized.html#11919" class="Record">DynamicArray</a> <a id="14217" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="14218" class="Symbol">}</a> <a id="14220" class="Symbol">→</a> <a id="14222" href="Examples.Amortized.html#14198" class="Bound">x</a> <a id="14224" href="Examples.Amortized.html#13696" class="Record Operator">≈</a> <a id="14226" href="Examples.Amortized.html#14200" class="Bound">y</a> <a id="14228" class="Symbol">→</a> <a id="14230" href="Calf.Step.html#385" class="Function">step</a> <a id="14235" class="Symbol">(</a><a id="14236" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="14250" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="14251" class="Symbol">)</a> <a id="14253" href="Examples.Amortized.html#14183" class="Bound">c</a> <a id="14255" href="Examples.Amortized.html#14198" class="Bound">x</a> <a id="14257" href="Examples.Amortized.html#13696" class="Record Operator">≈</a> <a id="14259" href="Calf.Step.html#385" class="Function">step</a> <a id="14264" class="Symbol">(</a><a id="14265" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="14279" href="Examples.Amortized.html#818" class="Generalizable">A</a><a id="14280" class="Symbol">)</a> <a id="14282" href="Examples.Amortized.html#14183" class="Bound">c</a> <a id="14284" href="Examples.Amortized.html#14200" class="Bound">y</a>
  <a id="14288" href="Examples.Amortized.html#13789" class="Field">_≈_.quit</a> <a id="14297" class="Symbol">(</a><a id="14298" href="Examples.Amortized.html#14173" class="Function">≈-cong</a> <a id="14305" href="Examples.Amortized.html#14305" class="Bound">c</a> <a id="14307" href="Examples.Amortized.html#14307" class="Bound">h</a><a id="14308" class="Symbol">)</a> <a id="14310" class="Symbol">=</a> <a id="14312" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="14320" class="Symbol">(</a><a id="14321" href="Calf.Step.html#385" class="Function">step</a> <a id="14326" class="Symbol">(</a><a id="14327" href="Calf.Metalanguage.html#330" class="Function">F</a> <a id="14329" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="14333" class="Symbol">)</a> <a id="14335" href="Examples.Amortized.html#14305" class="Bound">c</a><a id="14336" class="Symbol">)</a> <a id="14338" class="Symbol">(</a><a id="14339" href="Examples.Amortized.html#13789" class="Field">_≈_.quit</a> <a id="14348" href="Examples.Amortized.html#14307" class="Bound">h</a><a id="14349" class="Symbol">)</a>
  <a id="14353" href="Examples.Amortized.html#13869" class="Field">_≈_.append</a> <a id="14364" class="Symbol">(</a><a id="14365" href="Examples.Amortized.html#14173" class="Function">≈-cong</a> <a id="14372" href="Examples.Amortized.html#14372" class="Bound">c</a> <a id="14374" href="Examples.Amortized.html#14374" class="Bound">h</a><a id="14375" class="Symbol">)</a> <a id="14377" href="Examples.Amortized.html#14377" class="Bound">a</a> <a id="14379" class="Symbol">=</a> <a id="14381" href="Examples.Amortized.html#14173" class="Function">≈-cong</a> <a id="14388" href="Examples.Amortized.html#14372" class="Bound">c</a> <a id="14390" class="Symbol">(</a><a id="14391" href="Examples.Amortized.html#13869" class="Field">_≈_.append</a> <a id="14402" href="Examples.Amortized.html#14374" class="Bound">h</a> <a id="14404" href="Examples.Amortized.html#14377" class="Bound">a</a><a id="14405" class="Symbol">)</a>
  <a id="14409" href="Examples.Amortized.html#13967" class="Field">_≈_.get</a> <a id="14417" class="Symbol">(</a><a id="14418" href="Examples.Amortized.html#14173" class="Function">≈-cong</a> <a id="14425" href="Examples.Amortized.html#14425" class="Bound">c</a> <a id="14427" href="Examples.Amortized.html#14427" class="Bound">h</a><a id="14428" class="Symbol">)</a> <a id="14430" href="Examples.Amortized.html#14430" class="Bound">i</a> <a id="14432" class="Symbol">=</a> <a id="14434" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="14440" class="Symbol">(</a><a id="14441" href="Examples.Amortized.html#13967" class="Field">_≈_.get</a> <a id="14449" href="Examples.Amortized.html#14427" class="Bound">h</a> <a id="14451" href="Examples.Amortized.html#14430" class="Bound">i</a><a id="14452" class="Symbol">)</a> <a id="14454" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14456" href="Examples.Amortized.html#14173" class="Function">≈-cong</a> <a id="14463" href="Examples.Amortized.html#14425" class="Bound">c</a> <a id="14465" class="Symbol">(</a><a id="14466" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="14472" class="Symbol">(</a><a id="14473" href="Examples.Amortized.html#13967" class="Field">_≈_.get</a> <a id="14481" href="Examples.Amortized.html#14427" class="Bound">h</a> <a id="14483" href="Examples.Amortized.html#14430" class="Bound">i</a><a id="14484" class="Symbol">))</a>

  <a id="14490" class="Comment">-- from unreleased agda-stdlib</a>
  <a id="DynamicArray.2^n&gt;0"></a><a id="14523" href="Examples.Amortized.html#14523" class="Function">2^n&gt;0</a> <a id="14529" class="Symbol">:</a> <a id="14531" class="Symbol">∀</a> <a id="14533" class="Symbol">(</a><a id="14534" href="Examples.Amortized.html#14534" class="Bound">n</a> <a id="14536" class="Symbol">:</a> <a id="14538" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="14539" class="Symbol">)</a> <a id="14541" class="Symbol">→</a> <a id="14543" class="Number">2</a> <a id="14545" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="14547" href="Examples.Amortized.html#14534" class="Bound">n</a> <a id="14549" href="Data.Nat.Base.html#1709" class="Function Operator">&gt;</a> <a id="14551" class="Number">0</a>
  <a id="14555" href="Examples.Amortized.html#14523" class="Function">2^n&gt;0</a> <a id="14561" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a> <a id="14566" class="Symbol">=</a> <a id="14568" href="Data.Nat.Base.html#1600" class="InductiveConstructor">Nat.s≤s</a> <a id="14576" href="Data.Nat.Base.html#1558" class="InductiveConstructor">Nat.z≤n</a>
  <a id="14586" href="Examples.Amortized.html#14523" class="Function">2^n&gt;0</a> <a id="14592" class="Symbol">(</a><a id="14593" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="14597" href="Examples.Amortized.html#14597" class="Bound">n</a><a id="14598" class="Symbol">)</a> <a id="14600" class="Symbol">=</a> <a id="14602" href="Data.Nat.Properties.html#4748" class="Function">Nat.≤-trans</a> <a id="14614" class="Symbol">(</a><a id="14615" href="Examples.Amortized.html#14523" class="Function">2^n&gt;0</a> <a id="14621" href="Examples.Amortized.html#14597" class="Bound">n</a><a id="14622" class="Symbol">)</a> <a id="14624" class="Symbol">(</a><a id="14625" href="Data.Nat.Properties.html#17080" class="Function">Nat.m≤m+n</a> <a id="14635" class="Symbol">(</a><a id="14636" class="Number">2</a> <a id="14638" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="14640" href="Examples.Amortized.html#14597" class="Bound">n</a><a id="14641" class="Symbol">)</a> <a id="14643" class="Symbol">((</a><a id="14645" class="Number">2</a> <a id="14647" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="14649" href="Examples.Amortized.html#14597" class="Bound">n</a><a id="14650" class="Symbol">)</a> <a id="14652" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="14654" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="14658" class="Symbol">))</a>

  <a id="DynamicArray.2^-mono"></a><a id="14664" href="Examples.Amortized.html#14664" class="Function">2^-mono</a> <a id="14672" class="Symbol">:</a> <a id="14674" class="Symbol">{</a><a id="14675" href="Examples.Amortized.html#14675" class="Bound">m</a> <a id="14677" href="Examples.Amortized.html#14677" class="Bound">n</a> <a id="14679" class="Symbol">:</a> <a id="14681" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="14682" class="Symbol">}</a> <a id="14684" class="Symbol">→</a> <a id="14686" href="Examples.Amortized.html#14675" class="Bound">m</a> <a id="14688" href="Data.Nat.Base.html#1535" class="Datatype Operator">Nat.≤</a> <a id="14694" href="Examples.Amortized.html#14677" class="Bound">n</a> <a id="14696" class="Symbol">→</a> <a id="14698" class="Number">2</a> <a id="14700" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="14702" href="Examples.Amortized.html#14675" class="Bound">m</a> <a id="14704" href="Data.Nat.Base.html#1535" class="Datatype Operator">Nat.≤</a> <a id="14710" class="Number">2</a> <a id="14712" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="14714" href="Examples.Amortized.html#14677" class="Bound">n</a>
  <a id="14718" href="Examples.Amortized.html#14664" class="Function">2^-mono</a> <a id="14726" class="Symbol">{</a><a id="14727" class="Argument">n</a> <a id="14729" class="Symbol">=</a> <a id="14731" href="Examples.Amortized.html#14731" class="Bound">n</a><a id="14732" class="Symbol">}</a> <a id="14734" href="Data.Nat.Base.html#1558" class="InductiveConstructor">Nat.z≤n</a> <a id="14742" class="Symbol">=</a> <a id="14744" href="Examples.Amortized.html#14523" class="Function">2^n&gt;0</a> <a id="14750" href="Examples.Amortized.html#14731" class="Bound">n</a>
  <a id="14754" href="Examples.Amortized.html#14664" class="Function">2^-mono</a> <a id="14762" class="Symbol">(</a><a id="14763" href="Data.Nat.Base.html#1600" class="InductiveConstructor">Nat.s≤s</a> <a id="14771" href="Examples.Amortized.html#14771" class="Bound">h</a><a id="14772" class="Symbol">)</a> <a id="14774" class="Symbol">=</a> <a id="14776" href="Data.Nat.Properties.html#25411" class="Function">Nat.*-monoʳ-≤</a> <a id="14790" class="Number">2</a> <a id="14792" class="Symbol">(</a><a id="14793" href="Examples.Amortized.html#14664" class="Function">2^-mono</a> <a id="14801" href="Examples.Amortized.html#14771" class="Bound">h</a><a id="14802" class="Symbol">)</a>

  <a id="DynamicArray.2^suc[pred[n]]"></a><a id="14807" href="Examples.Amortized.html#14807" class="Function">2^suc[pred[n]]</a> <a id="14822" class="Symbol">:</a> <a id="14824" class="Symbol">(</a><a id="14825" href="Examples.Amortized.html#14825" class="Bound">n</a> <a id="14827" class="Symbol">:</a> <a id="14829" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="14830" class="Symbol">)</a> <a id="14832" class="Symbol">→</a> <a id="14834" class="Number">2</a> <a id="14836" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="14838" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="14842" class="Symbol">(</a><a id="14843" href="Data.Nat.Base.html#2880" class="Function">pred</a> <a id="14848" href="Examples.Amortized.html#14825" class="Bound">n</a><a id="14849" class="Symbol">)</a> <a id="14851" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="14853" class="Number">2</a> <a id="14855" href="Data.Nat.Base.html#1535" class="Datatype Operator">Nat.≤</a> <a id="14861" class="Number">2</a> <a id="14863" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="14865" href="Examples.Amortized.html#14825" class="Bound">n</a>
  <a id="14869" href="Examples.Amortized.html#14807" class="Function">2^suc[pred[n]]</a> <a id="14884" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a> <a id="14889" class="Symbol">=</a> <a id="14891" href="Data.Nat.Base.html#1558" class="InductiveConstructor">Nat.z≤n</a>
  <a id="14901" href="Examples.Amortized.html#14807" class="Function">2^suc[pred[n]]</a> <a id="14916" class="Symbol">(</a><a id="14917" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="14921" href="Examples.Amortized.html#14921" class="Bound">n</a><a id="14922" class="Symbol">)</a> <a id="14924" class="Symbol">=</a> <a id="14926" href="Data.Nat.Properties.html#42656" class="Function">Nat.m∸n≤m</a> <a id="14936" class="Symbol">(</a><a id="14937" class="Number">2</a> <a id="14939" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="14941" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="14945" href="Examples.Amortized.html#14921" class="Bound">n</a><a id="14946" class="Symbol">)</a> <a id="14948" class="Number">2</a>

  <a id="14953" class="Symbol">{-#</a> <a id="14957" class="Keyword">TERMINATING</a> <a id="14969" class="Symbol">#-}</a>
  <a id="DynamicArray.array≈SPEC/array"></a><a id="14975" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="14992" class="Symbol">:</a> <a id="14994" class="Symbol">(</a><a id="14995" href="Examples.Amortized.html#14995" class="Bound">n</a> <a id="14997" href="Examples.Amortized.html#14997" class="Bound">m</a> <a id="14999" class="Symbol">:</a> <a id="15001" href="Calf.Metalanguage.html#310" class="Function">val</a> <a id="15005" href="Calf.Types.Nat.html#183" class="Function">nat</a><a id="15008" class="Symbol">)</a> <a id="15010" class="Symbol">→</a> <a id="15012" href="Examples.Amortized.html#14997" class="Bound">m</a> <a id="15014" href="Data.Nat.Base.html#1535" class="Datatype Operator">Nat.≤</a> <a id="15020" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="15028" href="Data.Nat.Base.html#2880" class="Function">pred</a> <a id="15033" href="Examples.Amortized.html#14995" class="Bound">n</a> <a id="15035" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a> <a id="15037" class="Symbol">→</a>
    <a id="15043" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="15049" href="Examples.Amortized.html#14995" class="Bound">n</a> <a id="15051" href="Examples.Amortized.html#14997" class="Bound">m</a> <a id="15053" href="Examples.Amortized.html#13696" class="Record Operator">≈</a> <a id="15055" href="Calf.Step.html#385" class="Function">step</a> <a id="15060" class="Symbol">(</a><a id="15061" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="15075" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="15079" class="Symbol">)</a> <a id="15081" class="Symbol">(</a><a id="15082" class="Number">2</a> <a id="15084" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15086" href="Examples.Amortized.html#14995" class="Bound">n</a> <a id="15088" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15090" class="Number">2</a> <a id="15092" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="15094" href="Examples.Amortized.html#14997" class="Bound">m</a><a id="15095" class="Symbol">)</a> <a id="15097" class="Symbol">(</a><a id="15098" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="15109" class="Symbol">(</a><a id="15110" class="Number">2</a> <a id="15112" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15114" href="Examples.Amortized.html#14995" class="Bound">n</a> <a id="15116" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15118" href="Examples.Amortized.html#14997" class="Bound">m</a><a id="15119" class="Symbol">))</a>
  <a id="15124" href="Examples.Amortized.html#13789" class="Field">_≈_.quit</a> <a id="15133" class="Symbol">(</a><a id="15134" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="15151" href="Examples.Amortized.html#15151" class="Bound">n</a> <a id="15153" href="Examples.Amortized.html#15153" class="Bound">m</a> <a id="15155" href="Examples.Amortized.html#15155" class="Bound">h</a><a id="15156" class="Symbol">)</a> <a id="15158" class="Symbol">=</a> <a id="15160" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="15167" href="Examples.Amortized.html#13869" class="Field">_≈_.append</a> <a id="15178" class="Symbol">(</a><a id="15179" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="15196" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15198" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a> <a id="15203" href="Examples.Amortized.html#15203" class="Bound">h</a><a id="15204" class="Symbol">)</a> <a id="15206" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a> <a id="15211" class="Symbol">=</a>
    <a id="15217" href="Relation.Binary.PropositionalEquality.Core.html#1835" class="Function">Eq.subst₂</a>
      <a id="15233" class="Symbol">(λ</a> <a id="15236" href="Examples.Amortized.html#15236" class="Bound">c</a> <a id="15238" href="Examples.Amortized.html#15238" class="Bound">x</a> <a id="15240" class="Symbol">→</a>
        <a id="15250" href="Calf.Step.html#385" class="Function">step</a> <a id="15255" class="Symbol">(</a><a id="15256" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="15270" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="15274" class="Symbol">)</a> <a id="15276" class="Symbol">(</a><a id="15277" class="Number">2</a> <a id="15279" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15281" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="15282" class="Symbol">)</a> <a id="15284" class="Symbol">(</a><a id="15285" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="15291" class="Symbol">(</a><a id="15292" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15296" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="15297" class="Symbol">)</a> <a id="15299" class="Symbol">(</a><a id="15300" class="Number">2</a> <a id="15302" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15304" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15306" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15308" class="Number">1</a><a id="15309" class="Symbol">))</a> <a id="15312" href="Examples.Amortized.html#13696" class="Record Operator">≈</a>
        <a id="15322" href="Calf.Step.html#385" class="Function">step</a> <a id="15327" class="Symbol">(</a><a id="15328" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="15342" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="15346" class="Symbol">)</a> <a id="15348" class="Symbol">(</a><a id="15349" class="Number">2</a> <a id="15351" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15353" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15355" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="15357" href="Examples.Amortized.html#15236" class="Bound">c</a><a id="15358" class="Symbol">)</a> <a id="15360" class="Symbol">(</a><a id="15361" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="15372" href="Examples.Amortized.html#15238" class="Bound">x</a><a id="15373" class="Symbol">))</a>
      <a id="15382" class="Symbol">(</a><a id="15383" class="Keyword">let</a> <a id="15387" class="Keyword">open</a> <a id="15392" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a> <a id="15404" class="Keyword">in</a>
      <a id="15413" href="Relation.Binary.PropositionalEquality.Core.html#2806" class="Function Operator">begin</a>
        <a id="15427" class="Number">2</a> <a id="15429" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15431" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15435" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15437" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15439" class="Number">2</a> <a id="15441" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="15443" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="15451" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15453" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a>
      <a id="15461" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="15464" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="15472" class="Symbol">(</a><a id="15473" class="Number">2</a> <a id="15475" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15477" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15481" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15483" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸_</a><a id="15485" class="Symbol">)</a> <a id="15487" class="Symbol">(</a><a id="15488" href="Data.Nat.Properties.html#47836" class="Function">Nat.*-distribˡ-∸</a> <a id="15505" class="Number">2</a> <a id="15507" class="Symbol">(</a><a id="15508" class="Number">2</a> <a id="15510" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15512" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="15513" class="Symbol">)</a> <a id="15515" class="Number">1</a><a id="15516" class="Symbol">)</a> <a id="15518" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="15528" class="Number">2</a> <a id="15530" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15532" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15536" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15538" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15540" class="Symbol">(</a><a id="15541" class="Number">2</a> <a id="15543" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="15545" class="Number">2</a> <a id="15547" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15549" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15551" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15553" class="Number">2</a><a id="15554" class="Symbol">)</a>
      <a id="15562" href="Relation.Binary.PropositionalEquality.Core.html#2864" class="Function Operator">≡⟨⟩</a>
        <a id="15574" class="Number">2</a> <a id="15576" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15578" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15582" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15584" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15586" class="Symbol">(</a><a id="15587" class="Number">2</a> <a id="15589" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15591" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15595" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15597" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15599" class="Number">2</a><a id="15600" class="Symbol">)</a>
      <a id="15608" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="15611" href="Data.Nat.Properties.html#46898" class="Function">Nat.m∸[m∸n]≡n</a> <a id="15625" class="Symbol">(</a><a id="15626" href="Data.Nat.Properties.html#25411" class="Function">Nat.*-monoʳ-≤</a> <a id="15640" class="Number">2</a> <a id="15642" class="Symbol">(</a><a id="15643" href="Examples.Amortized.html#14523" class="Function">2^n&gt;0</a> <a id="15649" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="15650" class="Symbol">))</a> <a id="15653" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="15663" class="Number">2</a>
      <a id="15671" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a><a id="15672" class="Symbol">)</a>
      <a id="15680" class="Symbol">(</a><a id="15681" class="Keyword">let</a> <a id="15685" class="Keyword">open</a> <a id="15690" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a> <a id="15702" class="Keyword">in</a>
      <a id="15711" href="Relation.Binary.PropositionalEquality.Core.html#2806" class="Function Operator">begin</a>
        <a id="15725" class="Number">2</a> <a id="15727" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15729" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15733" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15735" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15737" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="15745" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15747" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a>
      <a id="15755" href="Relation.Binary.PropositionalEquality.Core.html#2864" class="Function Operator">≡⟨⟩</a>
        <a id="15767" class="Number">2</a> <a id="15769" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="15771" class="Number">2</a> <a id="15773" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15775" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15777" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15779" class="Symbol">(</a><a id="15780" class="Number">2</a> <a id="15782" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15784" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15786" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15788" class="Number">1</a><a id="15789" class="Symbol">)</a>
      <a id="15797" href="Relation.Binary.PropositionalEquality.Core.html#2864" class="Function Operator">≡⟨⟩</a>
        <a id="15809" class="Symbol">(</a><a id="15810" class="Number">2</a> <a id="15812" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15814" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15816" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="15818" class="Symbol">(</a><a id="15819" class="Number">2</a> <a id="15821" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15823" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15825" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="15827" class="Number">0</a><a id="15828" class="Symbol">))</a> <a id="15831" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15833" class="Symbol">(</a><a id="15834" class="Number">2</a> <a id="15836" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15838" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15840" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15842" class="Number">1</a><a id="15843" class="Symbol">)</a>
      <a id="15851" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="15854" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="15862" class="Symbol">(λ</a> <a id="15865" href="Examples.Amortized.html#15865" class="Bound">x</a> <a id="15867" class="Symbol">→</a> <a id="15869" class="Symbol">(</a><a id="15870" class="Number">2</a> <a id="15872" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15874" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="15875" class="Symbol">)</a> <a id="15877" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="15879" href="Examples.Amortized.html#15865" class="Bound">x</a> <a id="15881" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15883" class="Symbol">(</a><a id="15884" class="Number">2</a> <a id="15886" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15888" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15890" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15892" class="Number">1</a><a id="15893" class="Symbol">))</a> <a id="15896" class="Symbol">(</a><a id="15897" href="Data.Nat.Properties.html#13218" class="Function">Nat.+-identityʳ</a> <a id="15913" class="Symbol">(</a><a id="15914" class="Number">2</a> <a id="15916" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15918" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="15919" class="Symbol">))</a> <a id="15922" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="15932" class="Symbol">(</a><a id="15933" class="Number">2</a> <a id="15935" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15937" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15939" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="15941" class="Number">2</a> <a id="15943" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15945" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="15946" class="Symbol">)</a> <a id="15948" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15950" class="Symbol">(</a><a id="15951" class="Number">2</a> <a id="15953" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15955" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="15957" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="15959" class="Number">1</a><a id="15960" class="Symbol">)</a>
      <a id="15968" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="15971" href="Data.Nat.Properties.html#45738" class="Function">Nat.+-∸-assoc</a> <a id="15985" class="Symbol">(</a><a id="15986" class="Number">2</a> <a id="15988" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="15990" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="15991" class="Symbol">)</a> <a id="15993" class="Symbol">{</a><a id="15994" class="Argument">n</a> <a id="15996" class="Symbol">=</a> <a id="15998" class="Number">2</a> <a id="16000" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16002" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="16003" class="Symbol">}</a> <a id="16005" class="Symbol">{</a><a id="16006" class="Argument">o</a> <a id="16008" class="Symbol">=</a> <a id="16010" class="Number">2</a> <a id="16012" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16014" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16016" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="16018" class="Number">1</a><a id="16019" class="Symbol">}</a> <a id="16021" class="Symbol">(</a><a id="16022" href="Data.Nat.Properties.html#42656" class="Function">Nat.m∸n≤m</a> <a id="16032" class="Symbol">(</a><a id="16033" class="Number">2</a> <a id="16035" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16037" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="16038" class="Symbol">)</a> <a id="16040" class="Number">1</a><a id="16041" class="Symbol">)</a> <a id="16043" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="16053" class="Number">2</a> <a id="16055" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16057" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16059" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16061" class="Symbol">(</a><a id="16062" class="Number">2</a> <a id="16064" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16066" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16068" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="16070" class="Symbol">(</a><a id="16071" class="Number">2</a> <a id="16073" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16075" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16077" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="16079" class="Number">1</a><a id="16080" class="Symbol">))</a>
      <a id="16089" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="16092" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="16100" class="Symbol">(</a><a id="16101" class="Number">2</a> <a id="16103" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16105" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16107" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+_</a><a id="16109" class="Symbol">)</a> <a id="16111" class="Symbol">(</a><a id="16112" href="Data.Nat.Properties.html#46898" class="Function">Nat.m∸[m∸n]≡n</a> <a id="16126" class="Symbol">(</a><a id="16127" href="Examples.Amortized.html#14523" class="Function">2^n&gt;0</a> <a id="16133" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="16134" class="Symbol">))</a> <a id="16137" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="16147" class="Number">2</a> <a id="16149" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16151" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16153" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16155" class="Number">1</a>
      <a id="16163" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="16166" href="Data.Nat.Properties.html#13395" class="Function">Nat.+-comm</a> <a id="16177" class="Symbol">(</a><a id="16178" class="Number">2</a> <a id="16180" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16182" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="16183" class="Symbol">)</a> <a id="16185" class="Number">1</a> <a id="16187" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="16197" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16201" class="Symbol">(</a><a id="16202" class="Number">2</a> <a id="16204" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16206" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="16207" class="Symbol">)</a>
      <a id="16215" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a><a id="16216" class="Symbol">)</a>
      <a id="16224" class="Symbol">(</a><a id="16225" href="Examples.Amortized.html#14173" class="Function">≈-cong</a> <a id="16232" class="Symbol">(</a><a id="16233" class="Number">2</a> <a id="16235" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16237" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="16238" class="Symbol">)</a>
        <a id="16248" class="Symbol">{</a><a id="16249" class="Argument">x</a> <a id="16251" class="Symbol">=</a> <a id="16253" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="16259" class="Symbol">(</a><a id="16260" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16264" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="16265" class="Symbol">)</a> <a id="16267" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="16275" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16277" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a><a id="16278" class="Symbol">}</a>
        <a id="16288" class="Symbol">{</a><a id="16289" class="Argument">y</a> <a id="16291" class="Symbol">=</a> <a id="16293" href="Calf.Step.html#385" class="Function">step</a> <a id="16298" class="Symbol">(</a><a id="16299" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="16313" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="16317" class="Symbol">)</a> <a id="16319" class="Symbol">(</a><a id="16320" class="Number">2</a> <a id="16322" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16324" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16328" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16330" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="16332" class="Number">2</a> <a id="16334" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="16336" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="16344" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16346" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a><a id="16347" class="Symbol">)</a> <a id="16349" class="Symbol">(</a><a id="16350" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="16361" class="Symbol">(</a><a id="16362" class="Number">2</a> <a id="16364" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16366" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16370" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16372" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="16374" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="16382" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16384" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a><a id="16385" class="Symbol">))}</a>
        <a id="16397" class="Symbol">(</a><a id="16398" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="16415" class="Symbol">(</a><a id="16416" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16420" href="Examples.Amortized.html#15196" class="Bound">n</a><a id="16421" class="Symbol">)</a> <a id="16423" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="16431" href="Examples.Amortized.html#15196" class="Bound">n</a> <a id="16433" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a> <a id="16435" href="Data.Nat.Properties.html#4565" class="Function">Nat.≤-refl</a><a id="16445" class="Symbol">))</a>
  <a id="16450" href="Examples.Amortized.html#13869" class="Field">_≈_.append</a> <a id="16461" class="Symbol">(</a><a id="16462" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="16479" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="16481" class="Symbol">(</a><a id="16482" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16486" href="Examples.Amortized.html#16486" class="Bound">m</a><a id="16487" class="Symbol">)</a> <a id="16489" href="Examples.Amortized.html#16489" class="Bound">h</a><a id="16490" class="Symbol">)</a> <a id="16492" href="Calf.Types.Unit.html#190" class="InductiveConstructor">triv</a> <a id="16497" class="Symbol">=</a>
    <a id="16503" href="Relation.Binary.PropositionalEquality.Core.html#1835" class="Function">Eq.subst₂</a>
      <a id="16519" class="Symbol">(λ</a> <a id="16522" href="Examples.Amortized.html#16522" class="Bound">c</a> <a id="16524" href="Examples.Amortized.html#16524" class="Bound">x</a> <a id="16526" class="Symbol">→</a> <a id="16528" href="Examples.Amortized.html#12922" class="Function">array</a> <a id="16534" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="16536" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16538" href="Examples.Amortized.html#13696" class="Record Operator">≈</a> <a id="16540" href="Calf.Step.html#385" class="Function">step</a> <a id="16545" class="Symbol">(</a><a id="16546" href="Examples.Amortized.html#11878" class="Postulate">dynamic-array</a> <a id="16560" href="Calf.Types.Unit.html#198" class="Function">unit</a><a id="16564" class="Symbol">)</a> <a id="16566" href="Examples.Amortized.html#16522" class="Bound">c</a> <a id="16568" class="Symbol">(</a><a id="16569" href="Examples.Amortized.html#13365" class="Function">SPEC/array</a> <a id="16580" href="Examples.Amortized.html#16524" class="Bound">x</a><a id="16581" class="Symbol">))</a>
      <a id="16590" class="Symbol">(</a><a id="16591" class="Keyword">let</a>
        <a id="16603" href="Examples.Amortized.html#16603" class="Bound">lemma</a> <a id="16609" class="Symbol">:</a> <a id="16611" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16615" class="Symbol">(</a><a id="16616" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16620" class="Symbol">(</a><a id="16621" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16623" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16625" class="Symbol">(</a><a id="16626" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16628" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16630" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="16634" class="Symbol">)))</a> <a id="16638" href="Data.Nat.Base.html#1535" class="Datatype Operator">Nat.≤</a> <a id="16644" class="Symbol">(</a><a id="16645" class="Number">2</a> <a id="16647" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16649" href="Examples.Amortized.html#16479" class="Bound">n</a><a id="16650" class="Symbol">)</a>
        <a id="16660" href="Examples.Amortized.html#16603" class="Bound">lemma</a> <a id="16666" class="Symbol">=</a>
          <a id="16678" class="Keyword">let</a> <a id="16682" class="Keyword">open</a> <a id="16687" href="Data.Nat.Properties.html#12478" class="Module">Nat.≤-Reasoning</a> <a id="16703" class="Keyword">in</a>
          <a id="16716" href="Relation.Binary.Reasoning.Base.Triple.html#3010" class="Function Operator">begin</a>
            <a id="16734" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16738" class="Symbol">(</a><a id="16739" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16743" class="Symbol">(</a><a id="16744" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16746" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16748" class="Symbol">(</a><a id="16749" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16751" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16753" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="16757" class="Symbol">)))</a>
          <a id="16771" href="Relation.Binary.Reasoning.Base.Triple.html#4870" class="Function">≡˘⟨</a> <a id="16775" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="16783" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16787" class="Symbol">(</a><a id="16788" href="Data.Nat.Properties.html#12854" class="Function">Nat.+-suc</a> <a id="16798" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16800" class="Symbol">(</a><a id="16801" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16803" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16805" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="16809" class="Symbol">))</a> <a id="16812" href="Relation.Binary.Reasoning.Base.Triple.html#4870" class="Function">⟩</a>
            <a id="16826" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16830" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16832" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16834" class="Symbol">(</a><a id="16835" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16839" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="16841" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16843" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="16847" class="Symbol">)</a>
          <a id="16859" href="Relation.Binary.Reasoning.Base.Triple.html#3745" class="Function">≤⟨</a> <a id="16862" href="Data.Nat.Properties.html#17780" class="Function">Nat.+-mono-≤</a> <a id="16875" href="Examples.Amortized.html#16489" class="Bound">h</a> <a id="16877" class="Symbol">(</a><a id="16878" href="Data.Nat.Properties.html#17936" class="Function">Nat.+-monoˡ-≤</a> <a id="16892" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a> <a id="16897" href="Examples.Amortized.html#16489" class="Bound">h</a><a id="16898" class="Symbol">)</a> <a id="16900" href="Relation.Binary.Reasoning.Base.Triple.html#3745" class="Function">⟩</a>
            <a id="16914" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="16922" href="Data.Nat.Base.html#2880" class="Function">pred</a> <a id="16927" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="16929" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a> <a id="16931" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16933" class="Symbol">(</a><a id="16934" href="Data.Nat.PredExp2.html#373" class="Function Operator">pred[2^</a> <a id="16942" href="Data.Nat.Base.html#2880" class="Function">pred</a> <a id="16947" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="16949" href="Data.Nat.PredExp2.html#373" class="Function Operator">]</a> <a id="16951" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16953" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="16957" class="Symbol">)</a>
          <a id="16969" href="Relation.Binary.Reasoning.Base.Triple.html#4518" class="Function">≡⟨</a> <a id="16972" href="Data.Nat.Properties.html#47836" class="Function">Nat.*-distribˡ-∸</a> <a id="16989" class="Number">2</a> <a id="16991" class="Symbol">(</a><a id="16992" class="Number">2</a> <a id="16994" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="16996" href="Data.Nat.Base.html#2880" class="Function">pred</a> <a id="17001" href="Examples.Amortized.html#16479" class="Bound">n</a><a id="17002" class="Symbol">)</a> <a id="17004" class="Number">1</a> <a id="17006" href="Relation.Binary.Reasoning.Base.Triple.html#4518" class="Function">⟩</a>
            <a id="17020" class="Number">2</a> <a id="17022" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17024" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17028" class="Symbol">(</a><a id="17029" href="Data.Nat.Base.html#2880" class="Function">pred</a> <a id="17034" href="Examples.Amortized.html#16479" class="Bound">n</a><a id="17035" class="Symbol">)</a> <a id="17037" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17039" class="Number">2</a>
          <a id="17051" href="Relation.Binary.Reasoning.Base.Triple.html#3745" class="Function">≤⟨</a> <a id="17054" href="Examples.Amortized.html#14807" class="Function">2^suc[pred[n]]</a> <a id="17069" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17071" href="Relation.Binary.Reasoning.Base.Triple.html#3745" class="Function">⟩</a>
            <a id="17085" class="Number">2</a> <a id="17087" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17089" href="Examples.Amortized.html#16479" class="Bound">n</a>
          <a id="17101" href="Relation.Binary.Reasoning.Base.Triple.html#5119" class="Function Operator">∎</a>
      <a id="17109" class="Keyword">in</a>
      <a id="17118" class="Keyword">let</a> <a id="17122" class="Keyword">open</a> <a id="17127" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a> <a id="17139" class="Keyword">in</a>
      <a id="17148" href="Relation.Binary.PropositionalEquality.Core.html#2806" class="Function Operator">begin</a>
        <a id="17162" class="Number">2</a> <a id="17164" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17166" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17168" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17170" class="Number">2</a> <a id="17172" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17174" href="Examples.Amortized.html#16486" class="Bound">m</a>
      <a id="17182" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">≡˘⟨</a> <a id="17186" href="Data.Nat.Properties.html#47165" class="Function">Nat.[m+n]∸[m+o]≡n∸o</a> <a id="17206" class="Number">2</a> <a id="17208" class="Symbol">(</a><a id="17209" class="Number">2</a> <a id="17211" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17213" href="Examples.Amortized.html#16479" class="Bound">n</a><a id="17214" class="Symbol">)</a> <a id="17216" class="Symbol">(</a><a id="17217" class="Number">2</a> <a id="17219" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17221" href="Examples.Amortized.html#16486" class="Bound">m</a><a id="17222" class="Symbol">)</a> <a id="17224" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">⟩</a>
        <a id="17234" class="Symbol">(</a><a id="17235" class="Number">2</a> <a id="17237" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17239" class="Number">2</a> <a id="17241" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17243" href="Examples.Amortized.html#16479" class="Bound">n</a><a id="17244" class="Symbol">)</a> <a id="17246" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17248" class="Symbol">(</a><a id="17249" class="Number">2</a> <a id="17251" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17253" class="Number">2</a> <a id="17255" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17257" href="Examples.Amortized.html#16486" class="Bound">m</a><a id="17258" class="Symbol">)</a>
      <a id="17266" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="17269" href="Data.Nat.Properties.html#45738" class="Function">Nat.+-∸-assoc</a> <a id="17283" class="Number">2</a> <a id="17285" href="Examples.Amortized.html#16603" class="Bound">lemma</a> <a id="17291" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="17301" class="Number">2</a> <a id="17303" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17305" class="Symbol">(</a><a id="17306" class="Number">2</a> <a id="17308" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17310" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17312" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17314" class="Symbol">(</a><a id="17315" class="Number">2</a> <a id="17317" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17319" class="Number">2</a> <a id="17321" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17323" href="Examples.Amortized.html#16486" class="Bound">m</a><a id="17324" class="Symbol">))</a>
      <a id="17333" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="17336" href="Data.Nat.Properties.html#13395" class="Function">Nat.+-comm</a> <a id="17347" class="Number">2</a> <a id="17349" class="Symbol">(</a><a id="17350" class="Number">2</a> <a id="17352" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17354" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17356" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17358" class="Symbol">(</a><a id="17359" class="Number">2</a> <a id="17361" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17363" class="Number">2</a> <a id="17365" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17367" href="Examples.Amortized.html#16486" class="Bound">m</a><a id="17368" class="Symbol">))</a> <a id="17371" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="17381" class="Number">2</a> <a id="17383" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17385" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17387" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17389" class="Symbol">(</a><a id="17390" class="Number">2</a> <a id="17392" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17394" class="Number">2</a> <a id="17396" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17398" href="Examples.Amortized.html#16486" class="Bound">m</a><a id="17399" class="Symbol">)</a> <a id="17401" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17403" class="Number">2</a>
      <a id="17411" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">≡˘⟨</a> <a id="17415" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">Eq.cong</a> <a id="17423" class="Symbol">(λ</a> <a id="17426" href="Examples.Amortized.html#17426" class="Bound">x</a> <a id="17428" class="Symbol">→</a> <a id="17430" class="Number">2</a> <a id="17432" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17434" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17436" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17438" href="Examples.Amortized.html#17426" class="Bound">x</a> <a id="17440" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17442" class="Number">2</a><a id="17443" class="Symbol">)</a> <a id="17445" class="Symbol">(</a><a id="17446" href="Data.Nat.Properties.html#20870" class="Function">Nat.*-distribˡ-+</a> <a id="17463" class="Number">2</a> <a id="17465" class="Number">1</a> <a id="17467" href="Examples.Amortized.html#16486" class="Bound">m</a><a id="17468" class="Symbol">)</a> <a id="17470" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">⟩</a>
        <a id="17480" class="Number">2</a> <a id="17482" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17484" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17486" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17488" class="Number">2</a> <a id="17490" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17492" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17496" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="17498" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17500" class="Number">2</a>
      <a id="17508" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a><a id="17509" class="Symbol">)</a>
      <a id="17517" class="Symbol">(</a><a id="17518" class="Keyword">let</a> <a id="17522" class="Keyword">open</a> <a id="17527" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a> <a id="17539" class="Keyword">in</a>
      <a id="17548" href="Relation.Binary.PropositionalEquality.Core.html#2806" class="Function Operator">begin</a>
        <a id="17562" class="Number">2</a> <a id="17564" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17566" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17568" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17570" href="Examples.Amortized.html#16486" class="Bound">m</a>
      <a id="17578" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">≡˘⟨</a> <a id="17582" href="Data.Nat.Properties.html#47165" class="Function">Nat.[m+n]∸[m+o]≡n∸o</a> <a id="17602" class="Number">1</a> <a id="17604" class="Symbol">(</a><a id="17605" class="Number">2</a> <a id="17607" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17609" href="Examples.Amortized.html#16479" class="Bound">n</a><a id="17610" class="Symbol">)</a> <a id="17612" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="17614" href="Relation.Binary.PropositionalEquality.Core.html#3010" class="Function">⟩</a>
        <a id="17624" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17628" class="Symbol">(</a><a id="17629" class="Number">2</a> <a id="17631" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17633" href="Examples.Amortized.html#16479" class="Bound">n</a><a id="17634" class="Symbol">)</a> <a id="17636" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17638" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17642" href="Examples.Amortized.html#16486" class="Bound">m</a>
      <a id="17650" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a>
        <a id="17661" href="Data.Nat.Properties.html#45738" class="Function">Nat.+-∸-assoc</a>
          <a id="17685" class="Number">1</a>
          <a id="17697" class="Symbol">(</a><a id="17698" href="Data.Nat.Properties.html#4748" class="Function">Nat.≤-trans</a> <a id="17710" href="Examples.Amortized.html#16489" class="Bound">h</a> <a id="17712" class="Symbol">(</a><a id="17713" href="Data.Nat.Properties.html#42997" class="Function">Nat.∸-mono</a> <a id="17724" class="Symbol">(</a><a id="17725" href="Examples.Amortized.html#14664" class="Function">2^-mono</a> <a id="17733" class="Symbol">{</a><a id="17734" class="Argument">n</a> <a id="17736" class="Symbol">=</a> <a id="17738" href="Examples.Amortized.html#16479" class="Bound">n</a><a id="17739" class="Symbol">}</a> <a id="17741" href="Data.Nat.Properties.html#49529" class="Function">Nat.pred[n]≤n</a><a id="17754" class="Symbol">)</a> <a id="17756" class="Symbol">(</a><a id="17757" href="Data.Nat.Base.html#1558" class="InductiveConstructor">Nat.z≤n</a> <a id="17765" class="Symbol">{</a><a id="17766" class="Number">1</a><a id="17767" class="Symbol">})))</a>
      <a id="17778" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
        <a id="17788" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17792" class="Symbol">(</a><a id="17793" class="Number">2</a> <a id="17795" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17797" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17799" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17801" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17805" href="Examples.Amortized.html#16486" class="Bound">m</a><a id="17806" class="Symbol">)</a>
      <a id="17814" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a><a id="17815" class="Symbol">)</a>
      <a id="17823" class="Symbol">(</a><a id="17824" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="17841" href="Examples.Amortized.html#16479" class="Bound">n</a> <a id="17843" href="Examples.Amortized.html#16486" class="Bound">m</a> <a id="17845" class="Symbol">(</a><a id="17846" href="Data.Nat.Properties.html#7649" class="Function">Nat.&lt;⇒≤</a> <a id="17854" href="Examples.Amortized.html#16489" class="Bound">h</a><a id="17855" class="Symbol">))</a>
  <a id="17860" href="Examples.Amortized.html#13967" class="Field">_≈_.get</a> <a id="17868" class="Symbol">(</a><a id="17869" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="17886" href="Examples.Amortized.html#17886" class="Bound">n</a> <a id="17888" href="Examples.Amortized.html#17888" class="Bound">m</a> <a id="17890" href="Examples.Amortized.html#17890" class="Bound">h</a><a id="17891" class="Symbol">)</a> <a id="17893" href="Examples.Amortized.html#17893" class="Bound">i</a> <a id="17895" class="Keyword">with</a> <a id="17900" href="Examples.Amortized.html#17893" class="Bound">i</a> <a id="17902" href="Data.Nat.Properties.html#10078" class="Function Operator">Nat.&lt;?</a> <a id="17909" class="Number">2</a> <a id="17911" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="17913" href="Examples.Amortized.html#17886" class="Bound">n</a> <a id="17915" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="17917" href="Examples.Amortized.html#17888" class="Bound">m</a>
  <a id="17921" class="Symbol">...</a> <a id="17925" class="Symbol">|</a> <a id="17927" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="17930" href="Examples.Amortized.html#17930" class="Bound">¬p</a> <a id="17933" class="Symbol">=</a> <a id="17935" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="17940" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="17942" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="17959" class="Bound">n</a> <a id="17961" class="Bound">m</a> <a id="17963" class="Bound">h</a>
  <a id="17967" class="Symbol">...</a> <a id="17971" class="Symbol">|</a> <a id="17973" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="17977" href="Examples.Amortized.html#17977" class="Bound">p</a> <a id="17979" class="Symbol">=</a> <a id="17981" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="17986" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="17988" href="Examples.Amortized.html#14975" class="Function">array≈SPEC/array</a> <a id="18005" class="Bound">n</a> <a id="18007" class="Bound">m</a> <a id="18009" class="Bound">h</a>
</pre></body></html>